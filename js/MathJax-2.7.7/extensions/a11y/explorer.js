MathJax.Hub.Register.StartupHook("Sre Ready",function(){var a,o,n=MathJax.Hub.config.menuSettings,r={},s=(MathJax.Hub.Register.StartupHook("MathEvents Ready",function(){a=MathJax.Extension.MathEvents.Event.False,o=MathJax.Extension.MathEvents.Event.KEY}),MathJax.Extension.explorer={version:"1.5.0",dependents:[],defaults:{walker:"table",highlight:"none",background:"blue",foreground:"black",speech:!0,generation:"lazy",subtitle:!1,ruleset:"mathspeak-default"},eagerComplexity:80,prefix:"Assistive-",hook:null,locHook:null,oldrules:null,addMenuOption:function(e,t){n[s.prefix+e]=t},addDefaults:function(){for(var e,t=MathJax.Hub.CombineConfig("explorer",s.defaults),i=Object.keys(t),a=0;e=i[a];a++)void 0===n[s.prefix+e]&&s.addMenuOption(e,t[e]);s.setSpeechOption(),l.Reset()},setOption:function(e,t){n[s.prefix+e]!==t&&(s.addMenuOption(e,t),l.Reset())},getOption:function(e){return n[s.prefix+e]},speechOption:function(e){s.oldrules!==e.value&&(s.setSpeechOption(),l.Regenerate())},setSpeechOption:function(){var e=n[s.prefix+"ruleset"],t=e.split("-");sre.System.getInstance().setupEngine({locale:MathJax.Localization.locale,domain:s.Domain(t[0]),style:t[1],rules:s.RuleSet(t[0])}),s.oldrules=e},Domain:function(e){return"chromevox"!==e?"mathspeak":"default"},RuleSet:function(e){return"chromevox"!==e?["AbstractionRules","AbstractionSpanish","MathspeakRules","MathspeakSpanish"]:["AbstractionRules","SemanticTreeRules"]},Enable:function(e,t){n.explorer=!0,t&&(r.explorer=!0),MathJax.Extension.collapsible.Enable(!1,t),MathJax.Extension.AssistiveMML&&(MathJax.Extension.AssistiveMML.config.disabled=!0,n.assistiveMML=!1,t&&(r.assistiveMML=!1)),this.DisableMenus(!1),this.hook||(this.hook=MathJax.Hub.Register.MessageHook("New Math",["Register",this.Explorer])),this.locHook||(this.locHook=MathJax.Hub.Register.MessageHook("Locale Reset",["RemoveSpeech",this.Explorer])),e&&MathJax.Hub.Queue(["Reprocess",MathJax.Hub])},Disable:function(e,t){n.explorer=!1,t&&(r.explorer=!1),this.DisableMenus(!0),this.hook&&(MathJax.Hub.UnRegister.MessageHook(this.hook),this.hook=null);for(var i=this.dependents.length-1;0<=i;i--){var a=this.dependents[i];a.Disable&&a.Disable(!1,t)}},DisableMenus:function(e){if(MathJax.Menu&&(t=MathJax.Menu.menu.FindId("Accessibility","Explorer"))){for(var t,i,a=(t=t.submenu).items,o=2;i=a[o];o++)i.disabled=e;e||!t.FindId("SpeechOutput")||n[s.prefix+"speech"]||(t.FindId("Subtitles").disabled=!0)}},Dependent:function(e){this.dependents.push(e)}}),i=MathJax.Object.Subclass({div:null,inner:null,Init:function(){this.div=i.Create("assertive"),this.inner=MathJax.HTML.addElement(this.div,"div")},Add:function(){i.added||(document.body.appendChild(this.div),i.added=!0)},Show:function(e,t){this.div.classList.add("MJX_LiveRegion_Show");var e=e.getBoundingClientRect(),i=e.bottom+10+window.pageYOffset,e=e.left+window.pageXOffset,i=(this.div.style.top=i+"px",this.div.style.left=e+"px",t.colorString());this.inner.style.backgroundColor=i.background,this.inner.style.color=i.foreground},Hide:function(e){this.div.classList.remove("MJX_LiveRegion_Show")},Clear:function(){this.Update(""),this.inner.style.top="",this.inner.style.backgroundColor=""},Update:function(e){s.getOption("speech")&&i.Update(this.inner,e)}},{ANNOUNCE:"Navigatable Math in page. Explore with shift space and arrow keys. Expand or collapse elements hitting enter.",announced:!1,added:!1,styles:{".MJX_LiveRegion":{position:"absolute",top:"0",height:"1px",width:"1px",padding:"1px",overflow:"hidden"},".MJX_LiveRegion_Show":{top:"0",position:"absolute",width:"auto",height:"auto",padding:"0px 0px",opacity:1,"z-index":"202",left:0,right:0,margin:"0 auto","background-color":"white","box-shadow":"0px 10px 20px #888",border:"2px solid #CCCCCC"}},Create:function(e){var t=MathJax.HTML.Element("div",{className:"MJX_LiveRegion"});return t.setAttribute("aria-live",e),t},Update:MathJax.Hub.Browser.isPC?function(e,t){e.textContent="",setTimeout(function(){e.textContent=t},100)}:function(e,t){e.textContent="",e.textContent=t},Announce:function(){var e;s.getOption("speech")&&(i.announced=!0,MathJax.Ajax.Styles(i.styles),e=i.Create("polite"),document.body.appendChild(e),i.Update(e,i.ANNOUNCE),setTimeout(function(){document.body.removeChild(e)},1e3))}}),e=(MathJax.Extension.explorer.LiveRegion=i,MathJax.Ajax.fileURL(MathJax.Ajax.config.path.a11y)),l=MathJax.Extension.explorer.Explorer={liveRegion:i(),walker:null,highlighter:null,hoverer:null,flamer:null,speechDiv:null,earconFile:e+"/invalid_keypress"+(-1!==["Firefox","Chrome","Opera"].indexOf(MathJax.Hub.Browser.name)?".ogg":".mp3"),expanded:!1,focusoutEvent:MathJax.Hub.Browser.isFirefox?"blur":"focusout",focusinEvent:"focus",ignoreFocusOut:!1,jaxCache:{},messageID:null,Reset:function(){l.FlameEnriched()},Register:function(e){var t;!s.hook||(e=document.getElementById(e[1]))&&e.id&&((t=MathJax.Hub.getJaxFor(e.id))&&t.enriched&&(l.StateChange(e.id,t),l.liveRegion.Add(),l.AddEvent(e)))},StateChange:function(e,t){l.GetHighlighter(.2);var i=l.jaxCache[e];i&&i===t.root||(i&&l.highlighter.resetState(e+"-Frame"),l.jaxCache[e]=t.root)},AddAria:function(e){e.setAttribute("role","application"),e.setAttribute("aria-label","Math")},AddHook:function(i){l.RemoveHook(),l.hook=MathJax.Hub.Register.MessageHook("End Math",function(e){var e=e[1].id+"-Frame",t=document.getElementById(e);i&&e===l.expanded&&(l.ActivateWalker(t,i),t.focus(),l.expanded=!1)})},RemoveHook:function(){l.hook&&(MathJax.Hub.UnRegister.MessageHook(l.hook),l.hook=null)},AddMessage:function(){return MathJax.Message.Set("Generating Speech Output")},RemoveMessage:function(e){e&&MathJax.Message.Clear(e)},AddEvent:function(e){var t=e.id+"-Frame",e=e.previousSibling;e&&(t=e.id!==t?e.firstElementChild:e,l.AddAria(t),l.AddMouseEvents(t),(t="MathJax_MathML"===t.className?t.firstElementChild:t)&&(t.onkeydown=l.Keydown,l.Flame(t),t.addEventListener(l.focusinEvent,function(e){s.hook&&(i.announced||i.Announce())}),t.addEventListener(l.focusoutEvent,function(e){if(s.hook)return l.ignoreFocusOut&&(l.ignoreFocusOut=!1,"enter"===l.walker.moved)?void e.target.focus():void(l.walker&&l.DeactivateWalker())}),s.getOption("speech")&&l.AddSpeech(t)))},AddSpeech:function(e){var t=e.id,i=MathJax.Hub.getJaxFor(t).root.toMathML();if(e.getAttribute("haslabel")||l.AddMathLabel(i,t),!e.getAttribute("hasspeech"))switch(MathJax.Hub.config.explorer.generation){case"eager":l.AddSpeechEager(i,t);break;case"mixed":e.querySelectorAll("[data-semantic-complexity]").length>=s.eagerComplexity&&l.AddSpeechEager(i,t)}},AddSpeechLazy:function(e){var t=new sre.TreeSpeechGenerator;t.setRebuilt(l.walker.rebuilt),t.getSpeech(l.walker.rootNode,l.walker.xml),e.setAttribute("hasspeech","true")},AddSpeechEager:function(e,t){l.MakeSpeechTask(e,t,sre.TreeSpeechGenerator,function(e,t){e.setAttribute("hasspeech","true")},5)},AddMathLabel:function(e,t){l.MakeSpeechTask(e,t,sre.SummarySpeechGenerator,function(e,t){e.setAttribute("haslabel","true"),e.setAttribute("aria-label",t)},5)},MakeSpeechTask:function(i,a,o,n,e){var r=l.AddMessage();setTimeout(function(){var e=new o,t=document.getElementById(a),e=new sre.DummyWalker(t,e,l.highlighter,i).speech();e&&n(t,e),l.RemoveMessage(r)},e)},Keydown:function(e){if(e.keyCode===o.ESCAPE)return l.walker?(l.RemoveHook(),l.DeactivateWalker(),void a(e)):void 0;if(l.walker&&l.walker.isActive()){void 0!==l.walker.modifier&&(l.walker.modifier=e.shiftKey);var t=l.walker.move(e.keyCode);if(null!==t){if(t){if("expand"===l.walker.moved){if(l.expanded=l.walker.node.id,MathJax.Hub.Browser.isEdge)return l.ignoreFocusOut=!0,void l.DeactivateWalker();if(MathJax.Hub.Browser.isFirefox||MathJax.Hub.Browser.isMSIE)return void l.DeactivateWalker()}l.liveRegion.Update(l.walker.speech()),l.Highlight()}else l.PlayEarcon();a(e)}}else{var i,t=e.target;e.keyCode===o.SPACE&&(e.shiftKey&&s.hook?(i=MathJax.Hub.getJaxFor(t),l.ActivateWalker(t,i),l.AddHook(i)):MathJax.Extension.MathEvents.Event.ContextMenu(e,t),a(e))}},GetHighlighter:function(e){l.highlighter=sre.HighlighterFactory.highlighter({color:s.getOption("background"),alpha:e},{color:s.getOption("foreground"),alpha:1},{renderer:MathJax.Hub.outputJax["jax/mml"][0].id,browser:MathJax.Hub.Browser.name})},AddMouseEvents:function(e){sre.HighlighterFactory.addEvents(e,{mouseover:l.MouseOver,mouseout:l.MouseOut},{renderer:MathJax.Hub.outputJax["jax/mml"][0].id,browser:MathJax.Hub.Browser.name})},MouseOver:function(e){var t;"none"!==s.getOption("highlight")&&("hover"===s.getOption("highlight")&&(t=e.currentTarget,l.GetHighlighter(.1),l.highlighter.highlight([t]),l.hoverer=!0),a(e))},MouseOut:function(e){return l.hoverer&&(l.highlighter.unhighlight(),l.hoverer=!1),a(e)},Flame:function(e){if("flame"===s.getOption("highlight"))return l.GetHighlighter(.05),l.highlighter.highlightAll(e),void(l.flamer=!0)},UnFlame:function(){l.flamer&&(l.highlighter.unhighlightAll(),l.flamer=null)},FlameEnriched:function(){l.UnFlame();for(var e,t=0,i=MathJax.Hub.getAllJax();e=i[t];t++)l.Flame(e.SourceElement().previousSibling)},Walkers:{syntactic:sre.SyntaxWalker,table:sre.TableWalker,semantic:sre.SemanticWalker,none:sre.DummyWalker},ActivateWalker:function(e,t){var i=s.getOption("speech"),a=s.getOption("walker")?l.Walkers[MathJax.Hub.config.explorer.walker]:l.Walkers.none,o=new(i?sre.DirectSpeechGenerator:sre.DummySpeechGenerator);l.GetHighlighter(.2),l.walker=new a(e,o,l.highlighter,t.root.toMathML()),i&&!e.getAttribute("hasspeech")&&l.AddSpeechLazy(e),l.walker.activate(),i&&(s.getOption("subtitle")&&l.liveRegion.Show(e,l.highlighter),l.liveRegion.Update(l.walker.speech())),l.Highlight(),l.ignoreFocusOut&&setTimeout(function(){l.ignoreFocusOut=!1},500)},DeactivateWalker:function(){l.liveRegion.Clear(),l.liveRegion.Hide(),l.Unhighlight(),l.currentHighlight=null,l.walker.deactivate(),l.walker=null},Highlight:function(){l.Unhighlight(),l.highlighter.highlight(l.walker.getFocus().getNodes())},Unhighlight:function(){l.highlighter.unhighlight()},PlayEarcon:function(){new Audio(l.earconFile).play()},SpeechOutput:function(){l.Reset(),["Subtitles"].forEach(function(e){e=MathJax.Menu.menu.FindId("Accessibility","Explorer",e);e&&(e.disabled=!e.disabled)}),l.Regenerate()},RemoveSpeech:function(){s.setSpeechOption();for(var e=0,t=MathJax.Hub.getAllJax();i=t[e];e++){var i=document.getElementById(i.inputID+"-Frame");i&&(i.removeAttribute("hasspeech"),i.removeAttribute("haslabel"))}},Regenerate:function(){for(var e=0,t=MathJax.Hub.getAllJax();i=t[e];e++){var i=document.getElementById(i.inputID+"-Frame");i&&(i.removeAttribute("hasspeech"),l.AddSpeech(i))}},Startup:function(){var e=MathJax.Extension.collapsible;e&&e.Dependent(s),s.addDefaults()}};MathJax.Hub.Register.StartupHook("End Extensions",function(){s[!1===n.explorer?"Disable":"Enable"](),MathJax.Hub.Startup.signal.Post("Explorer Ready"),MathJax.Hub.Register.StartupHook("MathMenu Ready",function(){r=MathJax.Menu.cookie;var e,t=MathJax.Menu.ITEM,i=MathJax.Menu.menu,a={action:l.Reset},o={action:s.speechOption},a=t.SUBMENU(["Explorer","Explorer"],t.CHECKBOX(["Active","Active"],"explorer",{action:function(e){s[n.explorer?"Enable":"Disable"](!0,!0),MathJax.Menu.saveCookie()}}),t.RULE(),t.CHECKBOX(["Walker","Walker"],"Assistive-walker"),t.SUBMENU(["Highlight","Highlight"],t.RADIO(["none","None"],"Assistive-highlight",a),t.RADIO(["hover","Hover"],"Assistive-highlight",a),t.RADIO(["flame","Flame"],"Assistive-highlight",a)),t.SUBMENU(["Background","Background"],t.RADIO(["blue","Blue"],"Assistive-background",a),t.RADIO(["red","Red"],"Assistive-background",a),t.RADIO(["green","Green"],"Assistive-background",a),t.RADIO(["yellow","Yellow"],"Assistive-background",a),t.RADIO(["cyan","Cyan"],"Assistive-background",a),t.RADIO(["magenta","Magenta"],"Assistive-background",a),t.RADIO(["white","White"],"Assistive-background",a),t.RADIO(["black","Black"],"Assistive-background",a)),t.SUBMENU(["Foreground","Foreground"],t.RADIO(["black","Black"],"Assistive-foreground",a),t.RADIO(["white","White"],"Assistive-foreground",a),t.RADIO(["magenta","Magenta"],"Assistive-foreground",a),t.RADIO(["cyan","Cyan"],"Assistive-foreground",a),t.RADIO(["yellow","Yellow"],"Assistive-foreground",a),t.RADIO(["green","Green"],"Assistive-foreground",a),t.RADIO(["red","Red"],"Assistive-foreground",a),t.RADIO(["blue","Blue"],"Assistive-foreground",a)),t.RULE(),t.CHECKBOX(["SpeechOutput","Speech Output"],"Assistive-speech",{action:l.SpeechOutput}),t.CHECKBOX(["Subtitles","Subtitles"],"Assistive-subtitle",{disabled:!n["Assistive-speech"]}),t.RULE(),t.SUBMENU(["Mathspeak","Mathspeak Rules"],t.RADIO(["mathspeak-default","Verbose"],"Assistive-ruleset",o),t.RADIO(["mathspeak-brief","Brief"],"Assistive-ruleset",o),t.RADIO(["mathspeak-sbrief","Superbrief"],"Assistive-ruleset",o)),t.SUBMENU(["Chromevox","ChromeVox Rules"],t.RADIO(["chromevox-default","Verbose"],"Assistive-ruleset",o),t.RADIO(["chromevox-short","Short"],"Assistive-ruleset",o),t.RADIO(["chromevox-alternative","Alternative"],"Assistive-ruleset",o))),t=(i.FindId("Accessibility")||{}).submenu;t?null!==(e=t.IndexOfId("Explorer"))?t.items[e]=a:(e=t.IndexOfId("CollapsibleMath"),t.items.splice(e+1,0,a)):(e=i.IndexOfId("CollapsibleMath"),i.items.splice(e+1,0,a)),n.explorer||s.DisableMenus(!0)},20)},20)}),MathJax.Hub.Register.StartupHook("SVG Jax Ready",function(){MathJax.Hub.Config({SVG:{addMMLclasses:!0}});var t,e=MathJax.OutputJax.SVG;parseFloat(e.version)<2.7&&(t=e.getJaxFromMath,e.Augment({getJaxFromMath:function(e){return e.parentNode.className.match(/MathJax_SVG_Display/)&&(e=e.parentNode),t.call(this,e)}}))}),MathJax.Ajax.config.path.a11y||(MathJax.Ajax.config.path.a11y=MathJax.Hub.config.root+"/extensions/a11y"),MathJax.Ajax.Require("[a11y]/collapsible.js"),MathJax.Hub.Register.StartupHook("Collapsible Ready",function(){MathJax.Extension.explorer.Explorer.Startup(),MathJax.Ajax.loadComplete("[a11y]/explorer.js")});