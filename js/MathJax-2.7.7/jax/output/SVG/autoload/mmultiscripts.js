MathJax.Hub.Register.StartupHook("SVG Jax Ready",function(){var t=MathJax.ElementJax.mml,G=MathJax.OutputJax.SVG;t.mmultiscripts.Augment({toSVG:function(t,s){this.SVGgetStyles();var a,i,e=this.SVG(),h=this.SVGgetScale(e),t=(this.SVGhandleSpace(e),this.data[this.base]?this.SVGdataStretched(this.base,t,s):G.BBOX.G().Clean()),s=G.TeX.x_height*h,d=G.TeX.scriptspace*h*.75,r=this.SVGgetScripts(d),p=r[0],u=r[1],l=r[2],r=r[3],c=(this.data[1]||this).SVGgetScale(),m=G.TeX.sup_drop*c,c=G.TeX.sub_drop*c,x=t.h-m,c=t.d+c,n=0,S=(t.ic&&(n=t.ic),!this.data[this.base]||"mi"!==this.data[this.base].type&&"mo"!==this.data[this.base].type||!G.isChar(this.data[this.base].data.join(""))||1!==t.scale||t.stretched||this.data[this.base].Get("largeop")||(x=c=0),this.getValues("subscriptshift","superscriptshift")),o=this.SVGgetMu(e),o=(S.subscriptshift=""===S.subscriptshift?0:G.length2em(S.subscriptshift,o),S.superscriptshift=""===S.superscriptshift?0:G.length2em(S.superscriptshift,o),0),w=(l?o=l.w+n:r&&(o=r.w-n),e.Add(t,Math.max(0,o),0),u||r?p||l?(c=Math.max(c,G.TeX.sub2*h),a=G.TeX.rule_thickness*h,i=(p||l).h,w=(u||r).d,l&&(i=Math.max(i,l.h)),x-(w=r?Math.max(w,r.d):w)-(i-c)<3*a&&(c=3*a-x+w+i,0<(m=.8*s-(x-w))&&(x+=m,c-=m)),x=Math.max(x,S.superscriptshift),c=Math.max(c,S.subscriptshift),u&&e.Add(u,o+t.w+d,x),r&&e.Add(r,o+n-r.w,x),p&&e.Add(p,o+t.w+d-n,-c),l&&e.Add(l,o-l.w,-c)):(a=this.getValues("displaystyle","texprimestyle"),i=G.TeX[a.displaystyle?"sup1":a.texprimestyle?"sup3":"sup2"],x=Math.max(x,i*h,S.superscriptshift),u&&(x=Math.max(x,u.d+.25*s)),r&&(x=Math.max(x,r.d+.25*s)),u&&e.Add(u,o+t.w+d,x),r&&e.Add(r,0,x)):(c=Math.max(c,G.TeX.sub1*h,S.subscriptshift),p&&(c=Math.max(c,p.h-.8*s)),l&&(c=Math.max(c,l.h-.8*s)),p&&e.Add(p,o+t.w+d-n,-c),l&&e.Add(l,0,-c)),e.Clean(),this.SVGhandleColor(e),this.SVGsaveData(e),this.SVGdata);return w.dx=o,w.s=d,w.u=x,w.v=c,w.delta=n,e},SVGgetScripts:function(t){for(var s,a=[],i=1,e=this.data.length,h=0,d=0;d<4;d+=2){for(;i<e&&"mprescripts"!==(this.data[i]||{}).type;){for(var r=[null,null,null,null],p=d;p<d+2;p++)this.data[i]&&"none"!==this.data[i].type&&"mprescripts"!==this.data[i].type&&(a[p]||(a[p]=G.BBOX.G()),r[p]=this.data[i].toSVG()),"mprescripts"!==(this.data[i]||{}).type&&i++;var u=2===d;u&&(h+=Math.max((r[d]||{w:0}).w,(r[d+1]||{w:0}).w)),r[d]&&a[d].Add(r[d].With({x:h-(u?r[d].w:0)})),r[d+1]&&a[d+1].Add(r[d+1].With({x:h-(u?r[d+1].w:0)})),u=a[d]||{w:0},s=a[d+1]||{w:0},u.w=s.w=h=Math.max(u.w,s.w)}i++,h=0}for(p=0;p<4;p++)a[p]&&(a[p].w+=t,a[p].Clean());return a}}),MathJax.Hub.Startup.signal.Post("SVG mmultiscripts Ready"),MathJax.Ajax.loadComplete(G.autoloadDir+"/mmultiscripts.js")});