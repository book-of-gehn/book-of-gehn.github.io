MathJax.Hub.Register.StartupHook("SVG Jax Ready",function(){var t=MathJax.ElementJax.mml,G=MathJax.OutputJax.SVG;t.mmultiscripts.Augment({toSVG:function(t,l){this.SVGgetStyles();var c,m,s=this.SVG(),x=this.SVGgetScale(s),t=(this.SVGhandleSpace(s),this.data[this.base]?this.SVGdataStretched(this.base,t,l):G.BBOX.G().Clean()),l=G.TeX.x_height*x,n=G.TeX.scriptspace*x*.75,a=this.SVGgetScripts(n),i=a[0],S=a[1],e=a[2],a=a[3],h=(this.data[1]||this).SVGgetScale(),o=G.TeX.sup_drop*h,h=G.TeX.sub_drop*h,d=t.h-o,h=t.d+h,w=0,r=(t.ic&&(w=t.ic),!this.data[this.base]||"mi"!==this.data[this.base].type&&"mo"!==this.data[this.base].type||!G.isChar(this.data[this.base].data.join(""))||1!==t.scale||t.stretched||this.data[this.base].Get("largeop")||(d=h=0),this.getValues("subscriptshift","superscriptshift")),p=this.SVGgetMu(s),p=(r.subscriptshift=""===r.subscriptshift?0:G.length2em(r.subscriptshift,p),r.superscriptshift=""===r.superscriptshift?0:G.length2em(r.superscriptshift,p),0),u=(e?p=e.w+w:a&&(p=a.w-w),s.Add(t,Math.max(0,p),0),S||a?i||e?(h=Math.max(h,G.TeX.sub2*x),c=G.TeX.rule_thickness*x,m=(i||e).h,u=(S||a).d,e&&(m=Math.max(m,e.h)),d-(u=a?Math.max(u,a.d):u)-(m-h)<3*c&&(h=3*c-d+u+m,0<(o=.8*l-(d-u))&&(d+=o,h-=o)),d=Math.max(d,r.superscriptshift),h=Math.max(h,r.subscriptshift),S&&s.Add(S,p+t.w+n,d),a&&s.Add(a,p+w-a.w,d),i&&s.Add(i,p+t.w+n-w,-h),e&&s.Add(e,p-e.w,-h)):(c=this.getValues("displaystyle","texprimestyle"),m=G.TeX[c.displaystyle?"sup1":c.texprimestyle?"sup3":"sup2"],d=Math.max(d,m*x,r.superscriptshift),S&&(d=Math.max(d,S.d+.25*l)),a&&(d=Math.max(d,a.d+.25*l)),S&&s.Add(S,p+t.w+n,d),a&&s.Add(a,0,d)):(h=Math.max(h,G.TeX.sub1*x,r.subscriptshift),i&&(h=Math.max(h,i.h-.8*l)),e&&(h=Math.max(h,e.h-.8*l)),i&&s.Add(i,p+t.w+n-w,-h),e&&s.Add(e,0,-h)),s.Clean(),this.SVGhandleColor(s),this.SVGsaveData(s),this.SVGdata);return u.dx=p,u.s=n,u.u=d,u.v=h,u.delta=w,s},SVGgetScripts:function(t){for(var s,a=[],i=1,e=this.data.length,h=0,d=0;d<4;d+=2){for(;i<e&&"mprescripts"!==(this.data[i]||{}).type;){for(var r=[null,null,null,null],p=d;p<d+2;p++)this.data[i]&&"none"!==this.data[i].type&&"mprescripts"!==this.data[i].type&&(a[p]||(a[p]=G.BBOX.G()),r[p]=this.data[i].toSVG()),"mprescripts"!==(this.data[i]||{}).type&&i++;var u=2===d;u&&(h+=Math.max((r[d]||{w:0}).w,(r[d+1]||{w:0}).w)),r[d]&&a[d].Add(r[d].With({x:h-(u?r[d].w:0)})),r[d+1]&&a[d+1].Add(r[d+1].With({x:h-(u?r[d+1].w:0)})),u=a[d]||{w:0},s=a[d+1]||{w:0},u.w=s.w=h=Math.max(u.w,s.w)}i++,h=0}for(p=0;p<4;p++)a[p]&&(a[p].w+=t,a[p].Clean());return a}}),MathJax.Hub.Startup.signal.Post("SVG mmultiscripts Ready"),MathJax.Ajax.loadComplete(G.autoloadDir+"/mmultiscripts.js")});