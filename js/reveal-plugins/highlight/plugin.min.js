import hljs from"highlight.js";!function(i,r){"use strict";var e,c="hljs-ln",h="hljs-ln-line",g="hljs-ln-code",u="hljs-ln-numbers",d="hljs-ln-n",f="data-line-number",p=/\r\n|\r|\n/g;function t(e){try{var t,n=r.querySelectorAll("code.hljs,code.nohighlight");for(t in n)!n.hasOwnProperty(t)||n[t].classList.contains("nohljsln")||l(n[t],e)}catch(e){i.console.error("LineNumbers error: ",e)}}function l(e,t){"object"==typeof e&&(e.innerHTML=o(e,t))}function o(e,t){var n,i={singleLine:!!(t=t||{}).singleLine&&t.singleLine,startFrom:(i=e,t=t,n=1,isFinite(t.startFrom)&&(n=t.startFrom),t="data-ln-start-from",i=(i=i).hasAttribute(t)?i.getAttribute(t):null,n=null!==i?i&&(t=Number(i),isFinite(t))?t:1:n)},t=(function e(t){var n,i,r=t.childNodes;for(n in r)if(r.hasOwnProperty(n)&&0<((i=r[n]).textContent.trim().match(p)||[]).length)if(0<i.childNodes.length)e(i);else{l=void 0;o=void 0;a=void 0;s=void 0;c=void 0;var l=i.parentNode;var o=l.className;if(/hljs-/.test(o)){for(var a=m(l.innerHTML),s=0,c="";s<a.length;s++)c+=L('<span class="{0}">{1}</span>\n',[o,0<a[s].length?a[s]:" "]);l.innerHTML=c.trim()}}}(e),e.innerHTML),r=i,l=m(t);if(""===l[l.length-1].trim()&&l.pop(),1<l.length||r.singleLine){for(var o="",a=0,s=l.length;a<s;a++)o+=L('<tr><td class="{0} {1}" {3}="{5}"><div class="{2}" {3}="{5}"></div></td><td class="{0} {4}" {3}="{5}">{6}</td></tr>',[h,u,d,f,g,a+r.startFrom,0<l[a].length?l[a]:" "]);return L('<table class="{0}">{1}</table>',[c,o])}return t}function m(e){return 0===e.length?[]:e.split(p)}function L(e,n){return e.replace(/\{(\d+)\}/g,function(e,t){return void 0!==n[t]?n[t]:e})}hljs?(hljs.initLineNumbersOnLoad=function(e){"interactive"===r.readyState||"complete"===r.readyState?t(e):i.addEventListener("DOMContentLoaded",function(){t(e)})},hljs.lineNumbersBlock=l,hljs.lineNumbersValue=function(e,t){var n;if("string"==typeof e)return(n=document.createElement("code")).innerHTML=e,o(n,t)},(e=r.createElement("style")).type="text/css",e.innerHTML=L(".{0}{border-collapse:collapse}.{0} td{padding:0}.{1}:before{content:attr({2})}",[c,d,f]),r.getElementsByTagName("head")[0].appendChild(e)):i.console.error("highlight.js not detected!"),document.addEventListener("copy",function(e){var t,n=window.getSelection();!function(){for(var e=n.anchorNode;e;){if(e.className&&-1!==e.className.indexOf("hljs-ln-code"))return 1;e=e.parentNode}}()||(t=-1!==window.navigator.userAgent.indexOf("Edge")?function(e){for(var t=e.toString(),n=e.anchorNode;"TD"!==n.nodeName;)n=n.parentNode;for(var i=e.focusNode;"TD"!==i.nodeName;)i=i.parentNode;var e=parseInt(n.dataset.lineNumber),r=parseInt(i.dataset.lineNumber);if(e==r)return t;var l,o=n.textContent,a=i.textContent;for(r<e&&(l=e,e=r,r=l,l=o,o=a,a=l);0!==t.indexOf(o);)o=o.slice(1);for(;-1===t.lastIndexOf(a);)a=a.slice(0,-1);for(var s=o,c=function(){for(var e=n;"TABLE"!==e.nodeName;)e=e.parentNode;return e}(),h=e+1;h<r;++h){var u=L('.{0}[{1}="{2}"]',[g,f,h]);s+="\n"+c.querySelector(u).textContent}return s+"\n"+a}(n):n.toString(),e.clipboardData.setData("text/plain",t),e.preventDefault())})}(window,document);const Plugin={id:"highlight",HIGHLIGHT_STEP_DELIMITER:"|",HIGHLIGHT_LINE_DELIMITER:",",HIGHLIGHT_LINE_RANGE_DELIMITER:"-",hljs:hljs,init:function(e){let n=e.getConfig().highlight||{};n.highlightOnLoad="boolean"!=typeof n.highlightOnLoad||n.highlightOnLoad,n.escapeHTML="boolean"!=typeof n.escapeHTML||n.escapeHTML,Array.from(e.getRevealElement().querySelectorAll("pre code")).forEach(e=>{e.parentNode.classList.add("code-wrapper");var t=e.querySelector('script[type="text/template"]');t&&(e.textContent=t.innerHTML),e.hasAttribute("data-trim")&&"function"==typeof e.innerHTML.trim&&(e.innerHTML=betterTrim(e)),n.escapeHTML&&!e.hasAttribute("data-noescape")&&(e.innerHTML=e.innerHTML.replace(/</g,"&lt;").replace(/>/g,"&gt;")),e.addEventListener("focusout",function(e){hljs.highlightElement(e.currentTarget)},!1)}),"function"==typeof n.beforeHighlight&&n.beforeHighlight(hljs),n.highlightOnLoad&&Array.from(e.getRevealElement().querySelectorAll("pre code")).forEach(e=>{Plugin.highlightBlock(e)}),e.on("pdf-ready",function(){[].slice.call(e.getRevealElement().querySelectorAll("pre code[data-line-numbers].current-fragment")).forEach(function(e){Plugin.scrollHighlightedLineIntoView(e,{},!0)})})},highlightBlock:function(n){var i,e,r,t,l;hljs.highlightElement(n),0!==n.innerHTML.trim().length&&n.hasAttribute("data-line-numbers")&&(hljs.lineNumbersBlock(n,{singleLine:!0}),i={currentBlock:n},1<(e=Plugin.deserializeHighlightSteps(n.getAttribute("data-line-numbers"))).length&&("number"==typeof(r=parseInt(n.getAttribute("data-fragment-index"),10))&&!isNaN(r)||(r=null),e.slice(1).forEach(function(e){var t=n.cloneNode(!0);t.setAttribute("data-line-numbers",Plugin.serializeHighlightSteps([e])),t.classList.add("fragment"),n.parentNode.appendChild(t),Plugin.highlightLines(t),"number"==typeof r?(t.setAttribute("data-fragment-index",r),r+=1):t.removeAttribute("data-fragment-index"),t.addEventListener("visible",Plugin.scrollHighlightedLineIntoView.bind(Plugin,t,i)),t.addEventListener("hidden",Plugin.scrollHighlightedLineIntoView.bind(Plugin,t.previousElementSibling,i))}),n.removeAttribute("data-fragment-index"),n.setAttribute("data-line-numbers",Plugin.serializeHighlightSteps([e[0]]))),(t="function"==typeof n.closest?n.closest("section:not(.stack)"):null)&&t.addEventListener("visible",l=function(){Plugin.scrollHighlightedLineIntoView(n,i,!0),t.removeEventListener("visible",l)}),Plugin.highlightLines(n))},scrollHighlightedLineIntoView:function(e,t,n){cancelAnimationFrame(t.animationFrameID),t.currentBlock&&(e.scrollTop=t.currentBlock.scrollTop),t.currentBlock=e;var i,r,l=this.getHighlightedLineBounds(e),o=e.offsetHeight,a=getComputedStyle(e),s=(o-=parseInt(a.paddingTop)+parseInt(a.paddingBottom),e.scrollTop),c=l.top+(Math.min(l.bottom-l.top,o)-o)/2,l=e.querySelector(".hljs-ln");l&&(c+=l.offsetTop-parseInt(a.paddingTop)),c=Math.max(Math.min(c,e.scrollHeight-o),0),!0===n||s===c?e.scrollTop=c:e.scrollHeight<=o||(i=0,(r=function(){i=Math.min(i+.02,1),e.scrollTop=s+(c-s)*Plugin.easeInOutQuart(i),i<1&&(t.animationFrameID=requestAnimationFrame(r))})())},easeInOutQuart:function(e){return e<.5?8*e*e*e*e:1-8*--e*e*e*e},getHighlightedLineBounds:function(e){var t,e=e.querySelectorAll(".highlight-line");return 0===e.length?{top:0,bottom:0}:(t=e[0],e=e[e.length-1],{top:t.offsetTop,bottom:e.offsetTop+e.offsetHeight})},highlightLines:function(n,e){e=Plugin.deserializeHighlightSteps(e||n.getAttribute("data-line-numbers"));e.length&&e[0].forEach(function(e){var t=[];"number"==typeof e.end?t=[].slice.call(n.querySelectorAll("table tr:nth-child(n+"+e.start+"):nth-child(-n+"+e.end+")")):"number"==typeof e.start&&(t=[].slice.call(n.querySelectorAll("table tr:nth-child("+e.start+")"))),t.length&&(t.forEach(function(e){e.classList.add("highlight-line")}),n.classList.add("has-highlights"))})},deserializeHighlightSteps:function(e){return(e=(e=e.replace(/\s/g,"")).split(Plugin.HIGHLIGHT_STEP_DELIMITER)).map(function(e){return e.split(Plugin.HIGHLIGHT_LINE_DELIMITER).map(function(e){var t;return/^[\d-]+$/.test(e)?(e=e.split(Plugin.HIGHLIGHT_LINE_RANGE_DELIMITER),t=parseInt(e[0],10),e=parseInt(e[1],10),isNaN(e)?{start:t}:{start:t,end:e}):{}})})},serializeHighlightSteps:function(e){return e.map(function(e){return e.map(function(e){return"number"==typeof e.end?e.start+Plugin.HIGHLIGHT_LINE_RANGE_DELIMITER+e.end:"number"==typeof e.start?e.start:""}).join(Plugin.HIGHLIGHT_LINE_DELIMITER)}).join(Plugin.HIGHLIGHT_STEP_DELIMITER)}};function betterTrim(e){function n(e){return e.replace(/^[\s\uFEFF\xA0]+/g,"")}return e=function(e){for(var t=e.split("\n"),n=0;n<t.length&&""===t[n].trim();n++)t.splice(n--,1);for(n=t.length-1;0<=n&&""===t[n].trim();n--)t.splice(n,1);return t.join("\n")}(e.innerHTML).split("\n"),i=e.reduce(function(e,t){return 0<t.length&&0<n(t).length&&e>t.length-n(t).length?t.length-n(t).length:e},Number.POSITIVE_INFINITY),e.map(function(e,t){return e.slice(i)}).join("\n");var i}export default()=>Plugin;