const Plugin=()=>{let g,t;let n,l,i,o,r;function s(){(t=document.createElement("div")).classList.add("searchbox"),t.style.position="absolute",t.style.top="10px",t.style.right="10px",t.style.zIndex=10,t.innerHTML=`<input type="search" class="searchinput" placeholder="Search..." style="vertical-align: top;"/>
		</span>`,(n=t.querySelector(".searchinput")).style.width="240px",n.style.fontSize="14px",n.style.padding="4px 6px",n.style.color="#000",n.style.background="#fff",n.style.borderRadius="2px",n.style.border="0",n.style.outline="0",n.style.boxShadow="0 2px 18px rgba(0, 0, 0, 0.2)",n.style["-webkit-appearance"]="none",g.getRevealElement().appendChild(t),n.addEventListener("keyup",function(e){o=13!==e.keyCode||(e.preventDefault(),o&&(""===(e=n.value)?(r&&r.remove(),l=null):(r=new c("slidecontent"),l=r.apply(e),i=0)),l&&(l.length&&l.length<=i&&(i=0),l.length>i)&&(g.slide(l[i].h,l[i].v),i++),!1)},!1),d()}function a(){t||s(),t.style.display="inline",n.focus(),n.select()}function d(){t||s(),t.style.display="none",r&&r.remove()}function c(e,t){var n=document.getElementById(e)||document.body,d=t||"EM",c=new RegExp("^(?:"+d+"|SCRIPT|FORM)$"),p=["#ff6","#a0ffff","#9f9","#f99","#f6f"],u=[],h=0,f="",y=[];this.setRegex=function(e){e=e.trim(),f=new RegExp("("+e+")","i")},this.getRegex=function(){return f.toString().replace(/^\/\\b\(|\)\\b\/i$/g,"").replace(/\|/g," ")},this.hiliteWords=function(e){if(null!=e&&e&&f&&!c.test(e.nodeName)){if(e.hasChildNodes())for(var t=0;t<e.childNodes.length;t++)this.hiliteWords(e.childNodes[t]);var n;if(3==e.nodeType)if((n=e.nodeValue)&&(n=f.exec(n))){for(var l=e;null!=l&&"SECTION"!=l.nodeName;)l=l.parentNode;for(var i=g.getIndices(l),o=y.length,r=!1,t=0;t<o;t++)y[t].h===i.h&&y[t].v===i.v&&(r=!0);r||y.push(i),u[n[0].toLowerCase()]||(u[n[0].toLowerCase()]=p[h++%p.length]);var s=document.createElement(d),a=(s.appendChild(document.createTextNode(n[0])),s.style.backgroundColor=u[n[0].toLowerCase()],s.style.fontStyle="inherit",s.style.color="#000",e.splitText(n.index));a.nodeValue=a.nodeValue.substring(n[0].length),e.parentNode.insertBefore(s,a)}}},this.remove=function(){for(var e,t=document.getElementsByTagName(d);t.length&&(e=t[0]);)e.parentNode.replaceChild(e.firstChild,e)},this.apply=function(e){if(null!=e&&e)return this.remove(),this.setRegex(e),this.hiliteWords(n),y}}return{id:"search",init:e=>{(g=e).registerKeyboardShortcut("CTRL + Shift + F","Search"),document.addEventListener("keydown",function(e){"F"==e.key&&(e.ctrlKey||e.metaKey)&&(e.preventDefault(),t||s(),("inline"!==t.style.display?a:d)())},!1)},open:a}};export default Plugin;