!function(t,r){"object"==typeof exports&&"undefined"!=typeof module?r(exports,require("d3-selection"),require("d3-transition")):"function"==typeof define&&define.amd?define(["exports","d3-selection","d3-transition"],r):r(t.venn=t.venn||{},t.d3,t.d3)}(this,function(t,P,r){"use strict";var b=1e-10;function h(a,t){var l=function(t){for(var r=[],n=0;n<t.length;++n)for(var e=n+1;e<t.length;++e)for(var a=F(t[n],t[e]),i=0;i<a.length;++i){var s=a[i];s.parentIndex=[n,e],r.push(s)}return r}(a),r=l.filter(function(t){for(var r=t,n=a,e=0;e<n.length;++e)if(z(r,n[e])>n[e].radius+b)return!1;return!0}),h=0,x=0,c=[];if(1<r.length){for(var g=w(r),n=0;n<r.length;++n){var p=r[n];p.angle=Math.atan2(p.x-g.x,p.y-g.y)}r.sort(function(t,r){return r.angle-t.angle});var e=r[r.length-1];for(n=0;n<r.length;++n){for(var i,y,s,u=r[n],d=(x+=(e.x+u.x)*(u.y-e.y),{x:(u.x+e.x)/2,y:(u.y+e.y)/2}),o=null,v=0;v<u.parentIndex.length;++v)-1<e.parentIndex.indexOf(u.parentIndex[v])&&(i=a[u.parentIndex[v]],s=Math.atan2(u.x-i.x,u.y-i.y),(s=(y=Math.atan2(e.x-i.x,e.y-i.y))-s)<0&&(s+=2*Math.PI),y=y-s/2,s=z(d,{x:i.x+i.radius*Math.sin(y),y:i.y+i.radius*Math.cos(y)}),(null===o||o.width>s)&&(o={circle:i,width:s,p1:u,p2:e}));null!==o&&(c.push(o),h+=M(o.circle.radius,o.width),e=u)}}else{var f=a[0];for(n=1;n<a.length;++n)a[n].radius<f.radius&&(f=a[n]);var m=!1;for(n=0;n<a.length;++n)if(z(a[n],f)>Math.abs(f.radius-a[n].radius)){m=!0;break}m?h=x=0:(h=f.radius*f.radius*Math.PI,c.push({circle:f,p1:{x:f.x,y:f.y+f.radius},p2:{x:f.x-b,y:f.y+f.radius},width:2*f.radius}))}return x/=2,t&&(t.area=h+x,t.arcArea=h,t.polygonArea=x,t.arcs=c,t.innerPoints=r,t.intersectionPoints=l),h+x}function n(t,r){var n=Math.sqrt(t*t-r*r);return r*n+t*t*Math.atan2(r,n)}function M(t,r){return n(t,r-t)-n(t,-t)}function z(t,r){return Math.sqrt((t.x-r.x)*(t.x-r.x)+(t.y-r.y)*(t.y-r.y))}function g(t,r,n){if(t+r<=n)return 0;if(n<=Math.abs(t-r))return Math.PI*Math.min(t,r)*Math.min(t,r);var e=r-(n*n-t*t+r*r)/(2*n);return M(t,t-(n*n-r*r+t*t)/(2*n))+M(r,e)}function F(t,r){var n=z(t,r),e=t.radius,a=r.radius;if(e+a<=n||n<=Math.abs(e-a))return[];var a=(e*e-a*a+n*n)/(2*n),e=Math.sqrt(e*e-a*a),i=t.x+a*(r.x-t.x)/n,a=t.y+a*(r.y-t.y)/n,s=-(r.y-t.y)*(e/n),r=-(r.x-t.x)*(e/n);return[{x:i+s,y:a-r},{x:i-s,y:a+r}]}function w(t){for(var r={x:0,y:0},n=0;n<t.length;++n)r.x+=t[n].x,r.y+=t[n].y;return r.x/=t.length,r.y/=t.length,r}function y(t){for(var r=new Array(t),n=0;n<t;++n)r[n]=0;return r}function m(t,r){return y(t).map(function(){return y(r)})}function p(t,r){for(var n=0,e=0;e<t.length;++e)n+=t[e]*r[e];return n}function I(t){return Math.sqrt(p(t,t))}function O(t,r,n){for(var e=0;e<r.length;++e)t[e]=r[e]*n}function A(t,r,n,e,a){for(var i=0;i<t.length;++i)t[i]=r*n[i]+e*a[i]}function x(t,r,n){var l,h=(n=n||{}).maxIterations||200*r.length,x=n.nonZeroDelta||1.05,c=n.zeroDelta||.001,g=n.minErrorDelta||1e-6,p=n.minErrorDelta||1e-5,y=void 0!==n.rho?n.rho:1,d=void 0!==n.chi?n.chi:2,v=void 0!==n.psi?n.psi:-.5,m=void 0!==n.sigma?n.sigma:.5,e=r.length,a=new Array(e+1);a[0]=r,a[0].fx=t(r);for(var i=a[0].id=0;i<e;++i){var M=r.slice();M[i]=M[i]?M[i]*x:c,a[i+1]=M,a[i+1].fx=t(M),a[i+1].id=i+1}function z(t){for(var r=0;r<t.length;r++)a[e][r]=t[r];a[e].fx=t.fx}for(var b=function(t,r){return t.fx-r.fx},s=r.slice(),u=r.slice(),o=r.slice(),w=r.slice(),I=0;I<h;++I){for(a.sort(b),n.history&&((f=a.map(function(t){var r=t.slice();return r.fx=t.fx,r.id=t.id,r})).sort(function(t,r){return t.id-r.id}),n.history.push({x:a[0].slice(),fx:a[0].fx,simplex:f})),i=l=0;i<e;++i)l=Math.max(l,Math.abs(a[0][i]-a[1][i]));if(Math.abs(a[0].fx-a[e].fx)<g&&l<p)break;for(i=0;i<e;++i){for(var R=s[i]=0;R<e;++R)s[i]+=a[R][i];s[i]/=e}var f=a[e];if(A(u,1+y,s,-y,f),u.fx=t(u),u.fx<a[0].fx)A(w,1+d,s,-d,f),w.fx=t(w),w.fx<u.fx?z(w):z(u);else if(u.fx>=a[e-1].fx){var P=!1;if(u.fx>f.fx?(A(o,1+v,s,-v,f),o.fx=t(o),o.fx<f.fx?z(o):P=!0):(A(o,1-v*y,s,v*y,f),o.fx=t(o),o.fx<u.fx?z(o):P=!0),P){if(1<=m)break;for(i=1;i<a.length;++i)A(a[i],1-m,a[0],m,a[i]),a[i].fx=t(a[i])}}else z(u)}return a.sort(b),{fx:a[0].fx,x:a[0]}}function q(t,r,n){var e,a={x:r.slice(),fx:0,fxprime:r.slice()},i={x:r.slice(),fx:0,fxprime:r.slice()},s=r.slice(),u=1,l=(n=n||{}).maxIterations||20*r.length;a.fx=t(a.x,a.fxprime),O(e=a.fxprime.slice(),a.fxprime,-1);for(var o=0;o<l;++o){var f,u=function(g,a,i,s,u,o,f){var l=i.fx,h=p(i.fxprime,a),x=l,t=l,c=h,r=0;function n(t,r,n){for(var e=0;e<16;++e)if(u=(t+r)/2,A(s.x,1,i.x,u,a),x=s.fx=g(s.x,s.fxprime),c=p(s.fxprime,a),l+o*u*h<x||n<=x)r=u;else{if(Math.abs(c)<=-f*h)return u;0<=c*(r-t)&&(r=t),t=u,n=x}return 0}u=u||1,o=o||1e-6,f=f||.1;for(var e=0;e<10;++e){if(A(s.x,1,i.x,u,a),x=s.fx=g(s.x,s.fxprime),c=p(s.fxprime,a),l+o*u*h<x||e&&t<=x)return n(r,u,t);if(Math.abs(c)<=-f*h)return u;if(0<=c)return n(u,r,x);t=x,r=u,u*=2}return u}(t,e,a,i,u);if(n.history&&n.history.push({x:a.x.slice(),fx:a.fx,fxprime:a.fxprime.slice(),alpha:u}),u?(A(s,1,i.fxprime,-1,a.fxprime),f=p(a.fxprime,a.fxprime),A(e,Math.max(0,p(s,i.fxprime)/f),e,-1,i.fxprime),f=a,a=i,i=f):O(e,a.fxprime,-1),I(a.fxprime)<=1e-5)break}return n.history&&n.history.push({x:a.x.slice(),fx:a.fx,fxprime:a.fxprime.slice(),alpha:u}),a}function i(a,t){(t=t||{}).maxIterations=t.maxIterations||500;var r,i=(t.initialLayout||o)(a=function(t){t=t.slice();var r,n,e,a,i=[],s={};for(r=0;r<t.length;++r){var u=t[r];1==u.sets.length?i.push(u.sets[0]):2==u.sets.length&&(e=u.sets[0],a=u.sets[1],s[[e,a]]=!0,s[[a,e]]=!0)}for(i.sort(function(t,r){return r<t}),r=0;r<i.length;++r)for(e=i[r],n=r+1;n<i.length;++n)a=i[n],[e,a]in s||t.push({sets:[e,a],size:0});return t}(a)),n=[],s=[];for(r in i)i.hasOwnProperty(r)&&(n.push(i[r].x),n.push(i[r].y),s.push(r));for(var e=x(function(t){0;for(var r={},n=0;n<s.length;++n){var e=s[n];r[e]={x:t[2*n],y:t[2*n+1],radius:i[e].radius}}return k(r,a)},n,t).x,u=0;u<s.length;++u)r=s[u],i[r].x=e[2*u],i[r].y=e[2*u+1];return i}var C=1e-10;function j(r,n,e){if(Math.min(r,n)*Math.min(r,n)*Math.PI<=e+C)return Math.abs(r-n);var t=function(t){return g(r,n,t)-e},a=0,i=r+n,l=(u=(u=void 0)||{}).maxIterations||100,h=u.tolerance||1e-10,s=t(a),u=t(i),o=i-a;if(0<s*u)throw"Initial bisect points must have opposite signs";if(0===s)return a;if(0===u)return i;for(var x=0;x<l;++x){var f=a+(o/=2),c=t(f);if(0<=c*s&&(a=f),Math.abs(o)<h||0===c)return f}return a+o}function o(t,r){var n=e(t);return 8<=t.length&&(k(r=function(t,r){var n,f=(r=r||{}).restarts||10,e=[],a={};for(n=0;n<t.length;++n){var i=t[n];1==i.sets.length&&(a[i.sets[0]]=e.length,e.push(i))}function l(l,h){for(var t=l,r=h,x=d,c=v,g=0,n=0;n<r.length;++n)r[n]=0;for(n=0;n<x.length;++n)for(var e=t[2*n],a=t[2*n+1],i=n+1;i<x.length;++i){var s=t[2*i],u=t[2*i+1],o=x[n][i],p=c[n][i],f=(s-e)*(s-e)+(u-a)*(u-a),y=Math.sqrt(f),f=f-o*o;0<p&&y<=o||p<0&&o<=y||(g+=2*f*f,r[2*n]+=4*f*(e-s),r[2*n+1]+=4*f*(a-u),r[2*i]+=4*f*(s-e),r[2*i+1]+=4*f*(u-a))}return g}var s,h=function(t,a,i){var s=m(a.length,a.length),u=m(a.length,a.length);return t.filter(function(t){return 2==t.sets.length}).map(function(t){var r=i[t.sets[0]],n=i[t.sets[1]],e=j(Math.sqrt(a[r].size/Math.PI),Math.sqrt(a[n].size/Math.PI),t.size),e=(s[r][n]=s[n][r]=e,0);t.size+1e-10>=Math.min(a[r].size,a[n].size)?e=1:t.size<=1e-10&&(e=-1),u[r][n]=u[n][r]=e}),{distances:s,constraints:u}}(t,e,a),d=h.distances,v=h.constraints,u=I(d.map(I))/d.length;d=d.map(function(t){return t.map(function(t){return t/u})});for(n=0;n<f;++n){var o=y(2*d.length).map(Math.random);o=q(l,o,r),(!s||o.fx<s.fx)&&(s=o)}var x=s.x,c={};for(n=0;n<e.length;++n){var g=e[n];c[g.sets[0]]={x:x[2*n]*u,y:x[2*n+1]*u,radius:Math.sqrt(g.size/Math.PI)}}if(r.history)for(n=0;n<r.history.length;++n)O(r.history[n].x,u);return c}(t,r),t)+1e-8<k(n,t)&&(n=r)),n}function e(t){for(var n={},r={},e=0;e<t.length;++e){var l=t[e];1==l.sets.length&&(s=l.sets[0],n[s]={x:1e10,y:1e10,rowid:n.length,size:l.size,radius:Math.sqrt(l.size/Math.PI)},r[s]=[])}for(t=t.filter(function(t){return 2==t.sets.length}),e=0;e<t.length;++e){var a=t[e],h=a.hasOwnProperty("weight")?a.weight:1,x=a.sets[0],c=a.sets[1];a.size+C>=Math.min(n[x].size,n[c].size)&&(h=0),r[x].push({set:c,size:a.size,weight:h}),r[c].push({set:x,size:a.size,weight:h})}var g=[];for(s in r)if(r.hasOwnProperty(s)){for(var p=0,e=0;e<r[s].length;++e)p+=r[s][e].size*r[s][e].weight;g.push({set:s,size:p})}function y(t,r){return r.size-t.size}g.sort(y);var d={};function v(t){return t.set in d}function m(t,r){n[r].x=t.x,n[r].y=t.y,d[r]=!0}for(m({x:0,y:0},g[0].set),e=1;e<g.length;++e){var M=g[e].set,i=r[M].filter(v),s=n[M];if(i.sort(y),0===i.length)throw"ERROR: missing pairwise overlap information";for(var u=[],o=0;o<i.length;++o){var f=n[i[o].set],z=j(s.radius,f.radius,i[o].size);u.push({x:f.x+z,y:f.y}),u.push({x:f.x-z,y:f.y}),u.push({y:f.y+z,x:f.x}),u.push({y:f.y-z,x:f.x});for(var b=o+1;b<i.length;++b)for(var w=n[i[b].set],I=j(s.radius,w.radius,i[b].size),R=F({x:f.x,y:f.y,radius:z},{x:w.x,y:w.y,radius:I}),P=0;P<R.length;++P)u.push(R[P])}for(var A=1e50,O=u[0],o=0;o<u.length;++o){n[M].x=u[o].x,n[M].y=u[o].y;var q=k(n,t);q<A&&(A=q,O=u[o])}m(O,M)}return n}function k(r,t){var n=0;for(var e=0;e<t.length;++e){var a,i,s=t[e];1!=s.sets.length&&(i=2==s.sets.length?(i=r[s.sets[0]],a=r[s.sets[1]],g(i.radius,a.radius,z(i,a))):h(s.sets.map(function(t){return r[t]})),n+=(s.hasOwnProperty("weight")?s.weight:1)*(i-s.size)*(i-s.size))}return n}function D(t){function r(t){return t.parent!==t&&(t.parent=r(t.parent)),t.parent}t.map(function(t){t.parent=t});for(var n,e=0;e<t.length;++e)for(var a=e+1;a<t.length;++a){var i=t[e].radius+t[a].radius;z(t[e],t[a])+1e-10<i&&(i=t[a],n=t[e],i=r(i),n=r(n),i.parent=n)}for(var s,u={},e=0;e<t.length;++e)(s=r(t[e]).parent.setid)in u||(u[s]=[]),u[s].push(t[e]);t.map(function(t){delete t.parent});var o=[];for(s in u)u.hasOwnProperty(s)&&o.push(u[s]);return o}function T(t){function r(r){return{max:Math.max.apply(null,t.map(function(t){return t[r]+t.radius})),min:Math.min.apply(null,t.map(function(t){return t[r]-t.radius}))}}return{xRange:r("x"),yRange:r("y")}}function E(l,h,x){null===h&&(h=Math.PI/2);var c,g,o=[];for(c in l)l.hasOwnProperty(c)&&(g=l[c],o.push({x:g.x,y:g.y,radius:g.radius,setid:c}));for(var t=D(o),r=0;r<t.length;++r){b=s=i=m=v=z=M=a=d=y=e=a=p=n=void 0;var n=t[r],p=h;if(null===(a=x)?n.sort(function(t,r){return r.radius-t.radius}):n.sort(a),0<n.length)for(var y=n[0].x,d=n[0].y,e=0;e<n.length;++e)n[e].x-=y,n[e].y-=d;if(1<n.length){var v,m,a=Math.atan2(n[1].x,n[1].y)-p,M=Math.cos(a),z=Math.sin(a);for(e=0;e<n.length;++e)v=n[e].x,m=n[e].y,n[e].x=M*v-z*m,n[e].y=z*v+M*m}if(2<n.length){for(var i=Math.atan2(n[2].x,n[2].y)-p;i<0;)i+=2*Math.PI;for(;i>2*Math.PI;)i-=2*Math.PI;if(i>Math.PI){var s=n[1].y/(1e-10+n[1].x);for(e=0;e<n.length;++e){var b=(n[e].x+s*n[e].y)/(1+s*s);n[e].x=2*b-n[e].x,n[e].y=2*b*s-n[e].y}}}a=T(t[r]);t[r].size=(a.xRange.max-a.xRange.min)*(a.yRange.max-a.yRange.min),t[r].bounds=a}t.sort(function(t,r){return r.size-t.size});var f=(o=t[0]).bounds,w=(f.xRange.max-f.xRange.min)/50;function I(t,r,n){if(t){var e,a,i,s=t.bounds;r?e=f.xRange.max-s.xRange.min+w:(e=f.xRange.max-s.xRange.max,(i=(s.xRange.max-s.xRange.min)/2-(f.xRange.max-f.xRange.min)/2)<0&&(e+=i)),n?a=f.yRange.max-s.yRange.min+w:(a=f.yRange.max-s.yRange.max,(i=(s.yRange.max-s.yRange.min)/2-(f.yRange.max-f.yRange.min)/2)<0&&(a+=i));for(var u=0;u<t.length;++u)t[u].x+=e,t[u].y+=a,o.push(t[u])}}for(var u=1;u<t.length;)I(t[u],!0,!1),I(t[u+1],!1,!0),I(t[u+2],!0,!0),u+=3,f=T(o);var R={};for(r=0;r<o.length;++r)R[o[r].setid]=o[r];return R}function L(t,r,n,e){var a,i=[],l=[];for(a in t)t.hasOwnProperty(a)&&(l.push(a),i.push(t[a]));r-=2*e,n-=2*e;for(var h=T(i),s=h.xRange,u=h.yRange,h=r/(s.max-s.min),x=n/(u.max-u.min),o=Math.min(x,h),c=(r-(s.max-s.min)*o)/2,g=(n-(u.max-u.min)*o)/2,p={},f=0;f<i.length;++f){var y=i[f];p[l[f]]={radius:o*y.radius,x:e+c+(y.x-s.min)*o,y:e+g+(y.y-u.min)*o}}return p}function R(x,c){return function(){for(var t,r=P.select(this),n=r.datum(),e=x[n.sets[0]].radius||50,n=c(n)||"",a=n.split(/\s+/).reverse(),i=(n.length+a.length)/3,s=a.pop(),u=[s],o=0,f=r.text(null).append("tspan").text(s);s=a.pop();)u.push(s),t=u.join(" "),f.text(t),t.length>i&&f.node().getComputedTextLength()>e&&(u.pop(),f.text(u.join(" ")),u=[s],f=r.append("tspan").text(s),o++);var l=.35-1.1*o/2,n=r.attr("x"),h=r.attr("y");r.selectAll("tspan").attr("x",n).attr("y",h).attr("dy",function(t,r){return l+1.1*r+"em"})}}function c(t,r,n){for(var e,a=r[0].radius-z(r[0],t),i=1;i<r.length;++i)(e=r[i].radius-z(r[i],t))<=a&&(a=e);for(i=0;i<n.length;++i)(e=z(n[i],t)-n[i].radius)<=a&&(a=e);return a}function d(r,n){for(var t=[],e=0;e<r.length;++e){var a=r[e];t.push({x:a.x,y:a.y}),t.push({x:a.x+a.radius/2,y:a.y}),t.push({x:a.x-a.radius/2,y:a.y}),t.push({x:a.x,y:a.y+a.radius/2}),t.push({x:a.x,y:a.y-a.radius/2})}var i=t[0],s=c(t[0],r,n);for(e=1;e<t.length;++e){var l=c(t[e],r,n);s<=l&&(i=t[e],s=l)}var u=x(function(t){return-1*c({x:t[0],y:t[1]},r,n)},[i.x,i.y],{maxIterations:500,minErrorDelta:1e-10}).x,o={x:u[0],y:u[1]},f=!0;for(e=0;e<r.length;++e)if(z(o,r[e])>r[e].radius){f=!1;break}for(e=0;e<n.length;++e)if(z(o,n[e])<n[e].radius){f=!1;break}return o=!f?1==r.length?{x:r[0].x,y:r[0].y}:(h(r,u={}),0===u.arcs.length?{x:0,y:-1e3,disjoint:!0}:1==u.arcs.length?{x:u.arcs[0].circle.x,y:u.arcs[0].circle.y}:n.length?d(r,[]):w(u.arcs.map(function(t){return t.p1}))):o}function v(t){var r,n={},e=[];for(r in t)e.push(r),n[r]=[];for(var a=0;a<e.length;a++)for(var i=t[e[a]],s=a+1;s<e.length;++s){var u=t[e[s]],o=z(i,u);o+u.radius<=i.radius+1e-10?n[e[s]].push(e[a]):o+i.radius<=u.radius+1e-10&&n[e[a]].push(e[s])}return n}function S(t,r){for(var n={},l=v(t),e=0;e<r.length;++e){for(var a=r[e].sets,i={},s={},u=0;u<a.length;++u){i[a[u]]=!0;for(var h=l[a[u]],o=0;o<h.length;++o)s[h[o]]=!0}var f,x=[],c=[];for(f in t)f in i?x.push(t[f]):f in s||c.push(t[f]);var g=d(x,c);(n[a]=g).disjoint&&0<r[e].size&&console.log("WARNING: area "+a+" not represented on screen")}return n}function f(t,r,n){var e=[];return e.push("\nM",t,r),e.push("\nm",-n,0),e.push("\na",n,n,0,1,0,2*n,0),e.push("\na",n,n,0,1,0,2*-n,0),e.join(" ")}function _(t){t=t.split(" ");return{x:parseFloat(t[1]),y:parseFloat(t[2]),radius:-parseFloat(t[4])}}function N(t){var r={},n=(h(t,r),r.arcs);if(0===n.length)return"M 0 0";if(1==n.length)return f((t=n[0].circle).x,t.y,t.radius);for(var e=["\nM",n[0].p2.x,n[0].p2.y],a=0;a<n.length;++a){var i=n[a],s=i.circle.radius,u=i.width>s;e.push("\nA",s,s,0,u?1:0,1,i.p1.x,i.p1.y)}return e.join(" ")}t.intersectionArea=h,t.circleCircleIntersection=F,t.circleOverlap=g,t.circleArea=M,t.distance=z,t.circleIntegral=n,t.venn=i,t.greedyLayout=e,t.scaleSolution=L,t.normalizeSolution=E,t.bestInitialLayout=o,t.lossFunction=k,t.disjointCluster=D,t.distanceFromIntersectArea=j,t.VennDiagram=function(){var x=600,c=350,g=15,p=1e3,y=Math.PI/2,d=!0,z=!0,b=!0,v=null,w=null,n={},e=["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"],a=0,m=function(t){if(t in n)return n[t];t=n[t]=e[a];return(a+=1)>=e.length&&(a=0),t},I=i;function r(t){function r(t){return function(n){return N(t.sets.map(function(t){var r=s[t],t=(t=a[t])||{x:x/2,y:c/2,radius:1};return{x:(r=r||{x:x/2,y:c/2,radius:1}).x*(1-n)+t.x*n,y:r.y*(1-n)+t.y*n,radius:r.radius*(1-n)+t.radius*n}}))}}var n=t.datum(),e=I(n),a=L(e=d?E(e,y,w):e,x,c,g),i=S(a,n),e=(t.selectAll("svg").data([a]).enter().append("svg"),t.select("svg").attr("width",x).attr("height",c)),s={},u=!1,e=(e.selectAll(".venn-area path").each(function(t){var r=P.select(this).attr("d");1==t.sets.length&&r&&(u=!0,s[t.sets[0]]=_(r))}),e.selectAll(".venn-area").data(n,function(t){return t.sets})),n=e.enter().append("g").attr("class",function(t){return"venn-area venn-"+(1==t.sets.length?"circle":"intersection")}).attr("data-venn-sets",function(t){return t.sets.join("_")}),o=n.append("path"),l=n.append("text").attr("class","label").text(M).attr("text-anchor","middle").attr("dy",".35em").attr("x",x/2).attr("y",c/2),o=(b&&(o.style("fill-opacity","0").filter(function(t){return 1==t.sets.length}).style("fill",function(t){return m(M(t))}).style("fill-opacity",".25"),l.style("fill",function(t){return 1==t.sets.length?m(M(t)):"#444"})),t),t=(u?(o=t.transition("venn").duration(p)).selectAll("path").attrTween("d",r):o.selectAll("path").attr("d",function(t){return N(t.sets.map(function(t){return a[t]}))}),o.selectAll("text").filter(function(t){return t.sets in i}).text(M).attr("x",function(t){return Math.floor(i[t.sets].x)}).attr("y",function(t){return Math.floor(i[t.sets].y)})),f=(z&&(u?"on"in t?t.on("end",R(a,M)):t.each("end",R(a,M)):t.each(R(a,M))),e.exit().transition("venn").duration(p).remove()),h=(f.selectAll("path").attrTween("d",r),f.selectAll("text").attr("x",x/2).attr("y",c/2));return null!==v&&(l.style("font-size","0px"),t.style("font-size",v),h.style("font-size","0px")),{circles:a,textCentres:i,nodes:e,enter:n,update:o,exit:f}}function M(t){return t.label||(1==t.sets.length?""+t.sets[0]:void 0)}return r.wrap=function(t){return arguments.length?(z=t,r):z},r.width=function(t){return arguments.length?(x=t,r):x},r.height=function(t){return arguments.length?(c=t,r):c},r.padding=function(t){return arguments.length?(g=t,r):g},r.colours=function(t){return arguments.length?(m=t,r):m},r.fontSize=function(t){return arguments.length?(v=t,r):v},r.duration=function(t){return arguments.length?(p=t,r):p},r.layoutFunction=function(t){return arguments.length?(I=t,r):I},r.normalize=function(t){return arguments.length?(d=t,r):d},r.styled=function(t){return arguments.length?(b=t,r):b},r.orientation=function(t){return arguments.length?(y=t,r):y},r.orientationOrder=function(t){return arguments.length?(w=t,r):w},r},t.wrapText=R,t.computeTextCentres=S,t.computeTextCentre=d,t.sortAreas=function(t,n){for(var r=v(t.selectAll("svg").datum()),e={},a=0;a<n.sets.length;++a){var i,s=n.sets[a];for(i in r)for(var u=r[i],o=0;o<u.length;++o)if(u[o]==s){e[i]=!0;break}}function f(t){for(var r=0;r<t.length;++r)if(!(t[r]in e))return;return 1}t.selectAll("g").sort(function(t,r){return t.sets.length!=r.sets.length?t.sets.length-r.sets.length:t==n?f(r.sets)?-1:1:r==n?f(t.sets)?1:-1:r.size-t.size})},t.circlePath=f,t.circleFromPath=_,t.intersectionAreaPath=N,Object.defineProperty(t,"__esModule",{value:!0})});