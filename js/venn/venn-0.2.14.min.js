!function(t,r){"object"==typeof exports&&"undefined"!=typeof module?r(exports,require("d3-selection"),require("d3-transition")):"function"==typeof define&&define.amd?define(["exports","d3-selection","d3-transition"],r):r(t.venn=t.venn||{},t.d3,t.d3)}(this,function(t,R,r){"use strict";var M=1e-10;function h(a,t){var r=function(t){for(var r=[],n=0;n<t.length;++n)for(var e=n+1;e<t.length;++e)for(var a=j(t[n],t[e]),i=0;i<a.length;++i){var s=a[i];s.parentIndex=[n,e],r.push(s)}return r}(a),n=r.filter(function(t){for(var r=t,n=a,e=0;e<n.length;++e)if(b(r,n[e])>n[e].radius+M)return!1;return!0}),e=0,i=0,s=[];if(1<n.length){for(var u=w(n),o=0;o<n.length;++o){var f=n[o];f.angle=Math.atan2(f.x-u.x,f.y-u.y)}n.sort(function(t,r){return r.angle-t.angle});var l=n[n.length-1];for(o=0;o<n.length;++o){for(var h,x,c,g=n[o],p=(i+=(l.x+g.x)*(g.y-l.y),{x:(g.x+l.x)/2,y:(g.y+l.y)/2}),y=null,d=0;d<g.parentIndex.length;++d)-1<l.parentIndex.indexOf(g.parentIndex[d])&&(h=a[g.parentIndex[d]],c=Math.atan2(g.x-h.x,g.y-h.y),(c=(x=Math.atan2(l.x-h.x,l.y-h.y))-c)<0&&(c+=2*Math.PI),x=x-c/2,c=b(p,{x:h.x+h.radius*Math.sin(x),y:h.y+h.radius*Math.cos(x)}),(null===y||y.width>c)&&(y={circle:h,width:c,p1:g,p2:l}));null!==y&&(s.push(y),e+=z(y.circle.radius,y.width),l=g)}}else{var v=a[0];for(o=1;o<a.length;++o)a[o].radius<v.radius&&(v=a[o]);var m=!1;for(o=0;o<a.length;++o)if(b(a[o],v)>Math.abs(v.radius-a[o].radius)){m=!0;break}m?e=i=0:(e=v.radius*v.radius*Math.PI,s.push({circle:v,p1:{x:v.x,y:v.y+v.radius},p2:{x:v.x-M,y:v.y+v.radius},width:2*v.radius}))}return i/=2,t&&(t.area=e+i,t.arcArea=e,t.polygonArea=i,t.arcs=s,t.innerPoints=n,t.intersectionPoints=r),e+i}function n(t,r){var n=Math.sqrt(t*t-r*r);return r*n+t*t*Math.atan2(r,n)}function z(t,r){return n(t,r-t)-n(t,-t)}function b(t,r){return Math.sqrt((t.x-r.x)*(t.x-r.x)+(t.y-r.y)*(t.y-r.y))}function g(t,r,n){if(t+r<=n)return 0;if(n<=Math.abs(t-r))return Math.PI*Math.min(t,r)*Math.min(t,r);var e=r-(n*n-t*t+r*r)/(2*n);return z(t,t-(n*n-r*r+t*t)/(2*n))+z(r,e)}function j(t,r){var n=b(t,r),e=t.radius,a=r.radius;if(e+a<=n||n<=Math.abs(e-a))return[];var a=(e*e-a*a+n*n)/(2*n),e=Math.sqrt(e*e-a*a),i=t.x+a*(r.x-t.x)/n,a=t.y+a*(r.y-t.y)/n,s=-(r.y-t.y)*(e/n),r=-(r.x-t.x)*(e/n);return[{x:i+s,y:a-r},{x:i-s,y:a+r}]}function w(t){for(var r={x:0,y:0},n=0;n<t.length;++n)r.x+=t[n].x,r.y+=t[n].y;return r.x/=t.length,r.y/=t.length,r}function p(t){for(var r=new Array(t),n=0;n<t;++n)r[n]=0;return r}function y(t,r){return p(t).map(function(){return p(r)})}function d(t,r){for(var n=0,e=0;e<t.length;++e)n+=t[e]*r[e];return n}function m(t){return Math.sqrt(d(t,t))}function I(t,r,n){for(var e=0;e<r.length;++e)t[e]=r[e]*n}function A(t,r,n,e,a){for(var i=0;i<t.length;++i)t[i]=r*n[i]+e*a[i]}function x(t,r,n){var e,a=(n=n||{}).maxIterations||200*r.length,i=n.nonZeroDelta||1.05,s=n.zeroDelta||.001,u=n.minErrorDelta||1e-6,o=n.minErrorDelta||1e-5,f=void 0!==n.rho?n.rho:1,l=void 0!==n.chi?n.chi:2,h=void 0!==n.psi?n.psi:-.5,x=void 0!==n.sigma?n.sigma:.5,c=r.length,g=new Array(c+1);g[0]=r,g[0].fx=t(r);for(var p=g[0].id=0;p<c;++p){var y=r.slice();y[p]=y[p]?y[p]*i:s,g[p+1]=y,g[p+1].fx=t(y),g[p+1].id=p+1}function d(t){for(var r=0;r<t.length;r++)g[c][r]=t[r];g[c].fx=t.fx}for(var v=function(t,r){return t.fx-r.fx},m=r.slice(),M=r.slice(),z=r.slice(),b=r.slice(),w=0;w<a;++w){for(g.sort(v),n.history&&((R=g.map(function(t){var r=t.slice();return r.fx=t.fx,r.id=t.id,r})).sort(function(t,r){return t.id-r.id}),n.history.push({x:g[0].slice(),fx:g[0].fx,simplex:R})),p=e=0;p<c;++p)e=Math.max(e,Math.abs(g[0][p]-g[1][p]));if(Math.abs(g[0].fx-g[c].fx)<u&&e<o)break;for(p=0;p<c;++p){for(var I=m[p]=0;I<c;++I)m[p]+=g[I][p];m[p]/=c}var R=g[c];if(A(M,1+f,m,-f,R),M.fx=t(M),M.fx<g[0].fx)A(b,1+l,m,-l,R),b.fx=t(b),b.fx<M.fx?d(b):d(M);else if(M.fx>=g[c-1].fx){var P=!1;if(M.fx>R.fx?(A(z,1+h,m,-h,R),z.fx=t(z),z.fx<R.fx?d(z):P=!0):(A(z,1-h*f,m,h*f,R),z.fx=t(z),z.fx<M.fx?d(z):P=!0),P){if(1<=x)break;for(p=1;p<g.length;++p)A(g[p],1-x,g[0],x,g[p]),g[p].fx=t(g[p])}}else d(M)}return g.sort(v),{fx:g[0].fx,x:g[0]}}function P(t,r,n){var e,a={x:r.slice(),fx:0,fxprime:r.slice()},i={x:r.slice(),fx:0,fxprime:r.slice()},s=r.slice(),u=1,o=(n=n||{}).maxIterations||20*r.length;a.fx=t(a.x,a.fxprime),I(e=a.fxprime.slice(),a.fxprime,-1);for(var f=0;f<o;++f){var l,u=function(a,i,s,u,o,f,l){var h=s.fx,x=d(s.fxprime,i),c=h,t=h,g=x,r=0;function n(t,r,n){for(var e=0;e<16;++e)if(o=(t+r)/2,A(u.x,1,s.x,o,i),c=u.fx=a(u.x,u.fxprime),g=d(u.fxprime,i),h+f*o*x<c||n<=c)r=o;else{if(Math.abs(g)<=-l*x)return o;0<=g*(r-t)&&(r=t),t=o,n=c}return 0}o=o||1,f=f||1e-6,l=l||.1;for(var e=0;e<10;++e){if(A(u.x,1,s.x,o,i),c=u.fx=a(u.x,u.fxprime),g=d(u.fxprime,i),h+f*o*x<c||e&&t<=c)return n(r,o,t);if(Math.abs(g)<=-l*x)return o;if(0<=g)return n(o,r,c);t=c,r=o,o*=2}return o}(t,e,a,i,u);if(n.history&&n.history.push({x:a.x.slice(),fx:a.fx,fxprime:a.fxprime.slice(),alpha:u}),u?(A(s,1,i.fxprime,-1,a.fxprime),l=d(a.fxprime,a.fxprime),A(e,Math.max(0,d(s,i.fxprime)/l),e,-1,i.fxprime),l=a,a=i,i=l):I(e,a.fxprime,-1),m(a.fxprime)<=1e-5)break}return n.history&&n.history.push({x:a.x.slice(),fx:a.fx,fxprime:a.fxprime.slice(),alpha:u}),a}function i(a,t){(t=t||{}).maxIterations=t.maxIterations||500;var r,i=(t.initialLayout||o)(a=function(t){t=t.slice();var r,n,e,a,i=[],s={};for(r=0;r<t.length;++r){var u=t[r];1==u.sets.length?i.push(u.sets[0]):2==u.sets.length&&(e=u.sets[0],a=u.sets[1],s[[e,a]]=!0,s[[a,e]]=!0)}for(i.sort(function(t,r){return r<t}),r=0;r<i.length;++r)for(e=i[r],n=r+1;n<i.length;++n)a=i[n],[e,a]in s||t.push({sets:[e,a],size:0});return t}(a)),n=[],s=[];for(r in i)i.hasOwnProperty(r)&&(n.push(i[r].x),n.push(i[r].y),s.push(r));for(var e=x(function(t){0;for(var r={},n=0;n<s.length;++n){var e=s[n];r[e]={x:t[2*n],y:t[2*n+1],radius:i[e].radius}}return C(r,a)},n,t).x,u=0;u<s.length;++u)r=s[u],i[r].x=e[2*u],i[r].y=e[2*u+1];return i}var k=1e-10;function F(r,n,e){if(Math.min(r,n)*Math.min(r,n)*Math.PI<=e+k)return Math.abs(r-n);var t=function(t){return g(r,n,t)-e},a=0,i=r+n,s=(f=(f=void 0)||{}).maxIterations||100,u=f.tolerance||1e-10,o=t(a),f=t(i),l=i-a;if(0<o*f)throw"Initial bisect points must have opposite signs";if(0===o)return a;if(0===f)return i;for(var h=0;h<s;++h){var x=a+(l/=2),c=t(x);if(0<=c*o&&(a=x),Math.abs(l)<u||0===c)return x}return a+l}function o(t,r){var n=e(t);return 8<=t.length&&(C(r=function(t,r){var n,e=(r=r||{}).restarts||10,a=[],i={};for(n=0;n<t.length;++n){var s=t[n];1==s.sets.length&&(i[s.sets[0]]=a.length,a.push(s))}function u(t,r){for(var n=t,e=r,a=d,i=v,s=0,u=0;u<e.length;++u)e[u]=0;for(u=0;u<a.length;++u)for(var o=n[2*u],f=n[2*u+1],l=u+1;l<a.length;++l){var h=n[2*l],x=n[2*l+1],c=a[u][l],g=i[u][l],p=(h-o)*(h-o)+(x-f)*(x-f),y=Math.sqrt(p),p=p-c*c;0<g&&y<=c||g<0&&c<=y||(s+=2*p*p,e[2*u]+=4*p*(o-h),e[2*u+1]+=4*p*(f-x),e[2*l]+=4*p*(h-o),e[2*l+1]+=4*p*(x-f))}return s}var o,f=function(t,a,i){var s=y(a.length,a.length),u=y(a.length,a.length);return t.filter(function(t){return 2==t.sets.length}).map(function(t){var r=i[t.sets[0]],n=i[t.sets[1]],e=F(Math.sqrt(a[r].size/Math.PI),Math.sqrt(a[n].size/Math.PI),t.size),e=(s[r][n]=s[n][r]=e,0);t.size+1e-10>=Math.min(a[r].size,a[n].size)?e=1:t.size<=1e-10&&(e=-1),u[r][n]=u[n][r]=e}),{distances:s,constraints:u}}(t,a,i),d=f.distances,v=f.constraints,l=m(d.map(m))/d.length;d=d.map(function(t){return t.map(function(t){return t/l})});for(n=0;n<e;++n){var h=p(2*d.length).map(Math.random);h=P(u,h,r),(!o||h.fx<o.fx)&&(o=h)}var x=o.x,c={};for(n=0;n<a.length;++n){var g=a[n];c[g.sets[0]]={x:x[2*n]*l,y:x[2*n+1]*l,radius:Math.sqrt(g.size/Math.PI)}}if(r.history)for(n=0;n<r.history.length;++n)I(r.history[n].x,l);return c}(t,r),t)+1e-8<C(n,t)&&(n=r)),n}function e(t){for(var n={},r={},e=0;e<t.length;++e){var a=t[e];1==a.sets.length&&(d=a.sets[0],n[d]={x:1e10,y:1e10,rowid:n.length,size:a.size,radius:Math.sqrt(a.size/Math.PI)},r[d]=[])}for(t=t.filter(function(t){return 2==t.sets.length}),e=0;e<t.length;++e){var i=t[e],s=i.hasOwnProperty("weight")?i.weight:1,u=i.sets[0],o=i.sets[1];i.size+k>=Math.min(n[u].size,n[o].size)&&(s=0),r[u].push({set:o,size:i.size,weight:s}),r[o].push({set:u,size:i.size,weight:s})}var f=[];for(d in r)if(r.hasOwnProperty(d)){for(var l=0,e=0;e<r[d].length;++e)l+=r[d][e].size*r[d][e].weight;f.push({set:d,size:l})}function h(t,r){return r.size-t.size}f.sort(h);var x={};function c(t){return t.set in x}function g(t,r){n[r].x=t.x,n[r].y=t.y,x[r]=!0}for(g({x:0,y:0},f[0].set),e=1;e<f.length;++e){var p=f[e].set,y=r[p].filter(c),d=n[p];if(y.sort(h),0===y.length)throw"ERROR: missing pairwise overlap information";for(var v=[],m=0;m<y.length;++m){var M=n[y[m].set],z=F(d.radius,M.radius,y[m].size);v.push({x:M.x+z,y:M.y}),v.push({x:M.x-z,y:M.y}),v.push({y:M.y+z,x:M.x}),v.push({y:M.y-z,x:M.x});for(var b=m+1;b<y.length;++b)for(var w=n[y[b].set],I=F(d.radius,w.radius,y[b].size),R=j({x:M.x,y:M.y,radius:z},{x:w.x,y:w.y,radius:I}),P=0;P<R.length;++P)v.push(R[P])}for(var A=1e50,O=v[0],m=0;m<v.length;++m){n[p].x=v[m].x,n[p].y=v[m].y;var q=C(n,t);q<A&&(A=q,O=v[m])}g(O,p)}return n}function C(r,t){var n=0;for(var e=0;e<t.length;++e){var a,i,s=t[e];1!=s.sets.length&&(i=2==s.sets.length?(i=r[s.sets[0]],a=r[s.sets[1]],g(i.radius,a.radius,b(i,a))):h(s.sets.map(function(t){return r[t]})),n+=(s.hasOwnProperty("weight")?s.weight:1)*(i-s.size)*(i-s.size))}return n}function O(t){function r(t){return t.parent!==t&&(t.parent=r(t.parent)),t.parent}t.map(function(t){t.parent=t});for(var n,e=0;e<t.length;++e)for(var a=e+1;a<t.length;++a){var i=t[e].radius+t[a].radius;b(t[e],t[a])+1e-10<i&&(i=t[a],n=t[e],i=r(i),n=r(n),i.parent=n)}for(var s,u={},e=0;e<t.length;++e)(s=r(t[e]).parent.setid)in u||(u[s]=[]),u[s].push(t[e]);t.map(function(t){delete t.parent});var o=[];for(s in u)u.hasOwnProperty(s)&&o.push(u[s]);return o}function q(t){function r(r){return{max:Math.max.apply(null,t.map(function(t){return t[r]+t.radius})),min:Math.min.apply(null,t.map(function(t){return t[r]-t.radius}))}}return{xRange:r("x"),yRange:r("y")}}function D(t,r,n){null===r&&(r=Math.PI/2);var e,a,o=[];for(e in t)t.hasOwnProperty(e)&&(a=t[e],o.push({x:a.x,y:a.y,radius:a.radius,setid:e}));for(var i=O(o),s=0;s<i.length;++s){M=m=v=g=c=d=y=p=h=l=x=p=f=u=void 0;var u=i[s],f=r;if(null===(p=n)?u.sort(function(t,r){return r.radius-t.radius}):u.sort(p),0<u.length)for(var l=u[0].x,h=u[0].y,x=0;x<u.length;++x)u[x].x-=l,u[x].y-=h;if(1<u.length){var c,g,p=Math.atan2(u[1].x,u[1].y)-f,y=Math.cos(p),d=Math.sin(p);for(x=0;x<u.length;++x)c=u[x].x,g=u[x].y,u[x].x=y*c-d*g,u[x].y=d*c+y*g}if(2<u.length){for(var v=Math.atan2(u[2].x,u[2].y)-f;v<0;)v+=2*Math.PI;for(;v>2*Math.PI;)v-=2*Math.PI;if(v>Math.PI){var m=u[1].y/(1e-10+u[1].x);for(x=0;x<u.length;++x){var M=(u[x].x+m*u[x].y)/(1+m*m);u[x].x=2*M-u[x].x,u[x].y=2*M*m-u[x].y}}}p=q(i[s]);i[s].size=(p.xRange.max-p.xRange.min)*(p.yRange.max-p.yRange.min),i[s].bounds=p}i.sort(function(t,r){return r.size-t.size});var z=(o=i[0]).bounds,b=(z.xRange.max-z.xRange.min)/50;function w(t,r,n){if(t){var e,a,i,s=t.bounds;r?e=z.xRange.max-s.xRange.min+b:(e=z.xRange.max-s.xRange.max,(i=(s.xRange.max-s.xRange.min)/2-(z.xRange.max-z.xRange.min)/2)<0&&(e+=i)),n?a=z.yRange.max-s.yRange.min+b:(a=z.yRange.max-s.yRange.max,(i=(s.yRange.max-s.yRange.min)/2-(z.yRange.max-z.yRange.min)/2)<0&&(a+=i));for(var u=0;u<t.length;++u)t[u].x+=e,t[u].y+=a,o.push(t[u])}}for(var I=1;I<i.length;)w(i[I],!0,!1),w(i[I+1],!1,!0),w(i[I+2],!0,!0),I+=3,z=q(o);var R={};for(s=0;s<o.length;++s)R[o[s].setid]=o[s];return R}function T(t,r,n,e){var a,i=[],s=[];for(a in t)t.hasOwnProperty(a)&&(s.push(a),i.push(t[a]));r-=2*e,n-=2*e;for(var u=q(i),o=u.xRange,f=u.yRange,u=r/(o.max-o.min),l=n/(f.max-f.min),h=Math.min(l,u),x=(r-(o.max-o.min)*h)/2,c=(n-(f.max-f.min)*h)/2,g={},p=0;p<i.length;++p){var y=i[p];g[s[p]]={radius:h*y.radius,x:e+x+(y.x-o.min)*h,y:e+c+(y.y-f.min)*h}}return g}function E(x,c){return function(){for(var t,r=R.select(this),n=r.datum(),e=x[n.sets[0]].radius||50,n=c(n)||"",a=n.split(/\s+/).reverse(),i=(n.length+a.length)/3,s=a.pop(),u=[s],o=0,f=r.text(null).append("tspan").text(s);s=a.pop();)u.push(s),t=u.join(" "),f.text(t),t.length>i&&f.node().getComputedTextLength()>e&&(u.pop(),f.text(u.join(" ")),u=[s],f=r.append("tspan").text(s),o++);var l=.35-1.1*o/2,n=r.attr("x"),h=r.attr("y");r.selectAll("tspan").attr("x",n).attr("y",h).attr("dy",function(t,r){return l+1.1*r+"em"})}}function c(t,r,n){for(var e,a=r[0].radius-b(r[0],t),i=1;i<r.length;++i)(e=r[i].radius-b(r[i],t))<=a&&(a=e);for(i=0;i<n.length;++i)(e=b(n[i],t)-n[i].radius)<=a&&(a=e);return a}function v(r,n){for(var t=[],e=0;e<r.length;++e){var a=r[e];t.push({x:a.x,y:a.y}),t.push({x:a.x+a.radius/2,y:a.y}),t.push({x:a.x-a.radius/2,y:a.y}),t.push({x:a.x,y:a.y+a.radius/2}),t.push({x:a.x,y:a.y-a.radius/2})}var i=t[0],s=c(t[0],r,n);for(e=1;e<t.length;++e){var u=c(t[e],r,n);s<=u&&(i=t[e],s=u)}var o=x(function(t){return-1*c({x:t[0],y:t[1]},r,n)},[i.x,i.y],{maxIterations:500,minErrorDelta:1e-10}).x,f={x:o[0],y:o[1]},l=!0;for(e=0;e<r.length;++e)if(b(f,r[e])>r[e].radius){l=!1;break}for(e=0;e<n.length;++e)if(b(f,n[e])<n[e].radius){l=!1;break}return f=l?f:1==r.length?{x:r[0].x,y:r[0].y}:(h(r,o={}),0===o.arcs.length?{x:0,y:-1e3,disjoint:!0}:1==o.arcs.length?{x:o.arcs[0].circle.x,y:o.arcs[0].circle.y}:n.length?v(r,[]):w(o.arcs.map(function(t){return t.p1})))}function L(t){var r,n={},e=[];for(r in t)e.push(r),n[r]=[];for(var a=0;a<e.length;a++)for(var i=t[e[a]],s=a+1;s<e.length;++s){var u=t[e[s]],o=b(i,u);o+u.radius<=i.radius+1e-10?n[e[s]].push(e[a]):o+i.radius<=u.radius+1e-10&&n[e[a]].push(e[s])}return n}function S(t,r){for(var n={},e=L(t),a=0;a<r.length;++a){for(var i=r[a].sets,s={},u={},o=0;o<i.length;++o){s[i[o]]=!0;for(var f=e[i[o]],l=0;l<f.length;++l)u[f[l]]=!0}var h,x=[],c=[];for(h in t)h in s?x.push(t[h]):h in u||c.push(t[h]);var g=v(x,c);(n[i]=g).disjoint&&0<r[a].size&&console.log("WARNING: area "+i+" not represented on screen")}return n}function f(t,r,n){var e=[];return e.push("\nM",t,r),e.push("\nm",-n,0),e.push("\na",n,n,0,1,0,2*n,0),e.push("\na",n,n,0,1,0,2*-n,0),e.join(" ")}function _(t){t=t.split(" ");return{x:parseFloat(t[1]),y:parseFloat(t[2]),radius:-parseFloat(t[4])}}function N(t){var r={},n=(h(t,r),r.arcs);if(0===n.length)return"M 0 0";if(1==n.length)return f((t=n[0].circle).x,t.y,t.radius);for(var e=["\nM",n[0].p2.x,n[0].p2.y],a=0;a<n.length;++a){var i=n[a],s=i.circle.radius,u=i.width>s;e.push("\nA",s,s,0,u?1:0,1,i.p1.x,i.p1.y)}return e.join(" ")}t.intersectionArea=h,t.circleCircleIntersection=j,t.circleOverlap=g,t.circleArea=z,t.distance=b,t.circleIntegral=n,t.venn=i,t.greedyLayout=e,t.scaleSolution=T,t.normalizeSolution=D,t.bestInitialLayout=o,t.lossFunction=C,t.disjointCluster=O,t.distanceFromIntersectArea=F,t.VennDiagram=function(){var x=600,c=350,g=15,p=1e3,y=Math.PI/2,d=!0,v=!0,m=!0,M=null,z=null,r={},n=["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"],e=0,b=function(t){if(t in r)return r[t];t=r[t]=n[e];return(e+=1)>=n.length&&(e=0),t},w=i;function a(t){function r(t){return function(n){return N(t.sets.map(function(t){var r=s[t],t=(t=a[t])||{x:x/2,y:c/2,radius:1};return{x:(r=r||{x:x/2,y:c/2,radius:1}).x*(1-n)+t.x*n,y:r.y*(1-n)+t.y*n,radius:r.radius*(1-n)+t.radius*n}}))}}var n=t.datum(),e=w(n),a=T(e=d?D(e,y,z):e,x,c,g),i=S(a,n),e=(t.selectAll("svg").data([a]).enter().append("svg"),t.select("svg").attr("width",x).attr("height",c)),s={},u=!1,e=(e.selectAll(".venn-area path").each(function(t){var r=R.select(this).attr("d");1==t.sets.length&&r&&(u=!0,s[t.sets[0]]=_(r))}),e.selectAll(".venn-area").data(n,function(t){return t.sets})),n=e.enter().append("g").attr("class",function(t){return"venn-area venn-"+(1==t.sets.length?"circle":"intersection")}).attr("data-venn-sets",function(t){return t.sets.join("_")}),o=n.append("path"),f=n.append("text").attr("class","label").text(I).attr("text-anchor","middle").attr("dy",".35em").attr("x",x/2).attr("y",c/2),o=(m&&(o.style("fill-opacity","0").filter(function(t){return 1==t.sets.length}).style("fill",function(t){return b(I(t))}).style("fill-opacity",".25"),f.style("fill",function(t){return 1==t.sets.length?b(I(t)):"#444"})),t),t=(u?(o=t.transition("venn").duration(p)).selectAll("path").attrTween("d",r):o.selectAll("path").attr("d",function(t){return N(t.sets.map(function(t){return a[t]}))}),o.selectAll("text").filter(function(t){return t.sets in i}).text(I).attr("x",function(t){return Math.floor(i[t.sets].x)}).attr("y",function(t){return Math.floor(i[t.sets].y)})),l=(v&&(u?"on"in t?t.on("end",E(a,I)):t.each("end",E(a,I)):t.each(E(a,I))),e.exit().transition("venn").duration(p).remove()),h=(l.selectAll("path").attrTween("d",r),l.selectAll("text").attr("x",x/2).attr("y",c/2));return null!==M&&(f.style("font-size","0px"),t.style("font-size",M),h.style("font-size","0px")),{circles:a,textCentres:i,nodes:e,enter:n,update:o,exit:l}}function I(t){return t.label||(1==t.sets.length?""+t.sets[0]:void 0)}return a.wrap=function(t){return arguments.length?(v=t,a):v},a.width=function(t){return arguments.length?(x=t,a):x},a.height=function(t){return arguments.length?(c=t,a):c},a.padding=function(t){return arguments.length?(g=t,a):g},a.colours=function(t){return arguments.length?(b=t,a):b},a.fontSize=function(t){return arguments.length?(M=t,a):M},a.duration=function(t){return arguments.length?(p=t,a):p},a.layoutFunction=function(t){return arguments.length?(w=t,a):w},a.normalize=function(t){return arguments.length?(d=t,a):d},a.styled=function(t){return arguments.length?(m=t,a):m},a.orientation=function(t){return arguments.length?(y=t,a):y},a.orientationOrder=function(t){return arguments.length?(z=t,a):z},a},t.wrapText=E,t.computeTextCentres=S,t.computeTextCentre=v,t.sortAreas=function(t,n){for(var r=L(t.selectAll("svg").datum()),e={},a=0;a<n.sets.length;++a){var i,s=n.sets[a];for(i in r)for(var u=r[i],o=0;o<u.length;++o)if(u[o]==s){e[i]=!0;break}}function f(t){for(var r=0;r<t.length;++r)if(!(t[r]in e))return;return 1}t.selectAll("g").sort(function(t,r){return t.sets.length!=r.sets.length?t.sets.length-r.sets.length:t==n?f(r.sets)?-1:1:r==n?f(t.sets)?1:-1:r.size-t.size})},t.circlePath=f,t.circleFromPath=_,t.intersectionAreaPath=N,Object.defineProperty(t,"__esModule",{value:!0})});