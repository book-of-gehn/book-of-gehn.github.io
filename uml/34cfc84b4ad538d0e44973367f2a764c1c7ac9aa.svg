<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1034px" preserveAspectRatio="none" style="width:331px;height:1034px;" version="1.1" viewBox="0 0 331 1034" width="331px" zoomAndPan="magnify"><defs><filter height="300%" id="fz0i0brekuisv" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><!--cluster app1--><rect fill="#FEFECE" filter="url(#fz0i0brekuisv)" height="218" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="66" x="135" y="16"/><rect fill="#FFFFFF" height="185.7031" rx="12.5" ry="12.5" style="stroke: #FFFFFF; stroke-width: 1.0;" width="60" x="138" y="45.2969"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="135" x2="201" y1="42.2969" y2="42.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="48" x="144" y="32.9951">AppVM</text><!--cluster proxy1--><rect fill="#FEFECE" filter="url(#fz0i0brekuisv)" height="238" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="191" x="34" y="281"/><rect fill="#FFFFFF" height="205.7031" rx="12.5" ry="12.5" style="stroke: #FFFFFF; stroke-width: 1.0;" width="185" x="37" y="310.2969"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="34" x2="225" y1="307.2969" y2="307.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="58" x="100.5" y="297.9951">ProxyVM</text><!--cluster proxy2--><rect fill="#FEFECE" filter="url(#fz0i0brekuisv)" height="238" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="191" x="14" y="683"/><rect fill="#FFFFFF" height="205.7031" rx="12.5" ry="12.5" style="stroke: #FFFFFF; stroke-width: 1.0;" width="185" x="17" y="712.2969"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="14" x2="205" y1="709.2969" y2="709.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="58" x="80.5" y="699.9951">ProxyVM</text><!--cluster app2--><rect fill="#FEFECE" filter="url(#fz0i0brekuisv)" height="55" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="64" x="35" y="968"/><rect fill="#FFFFFF" height="22.7031" rx="12.5" ry="12.5" style="stroke: #FFFFFF; stroke-width: 1.0;" width="58" x="38" y="997.2969"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="35" x2="99" y1="994.2969" y2="994.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="48" x="43" y="984.9951">AppVM</text><rect fill="#FEFECE" filter="url(#fz0i0brekuisv)" height="40" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="50" x="143" y="186"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="37" x="149.5" y="210.8467">route</text><ellipse cx="168" cy="53" fill="#000000" filter="url(#fz0i0brekuisv)" rx="10" ry="10" style="stroke: none; stroke-width: 1.0;"/><rect fill="#FEFECE" filter="url(#fz0i0brekuisv)" height="40" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="50" x="42" y="471"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="37" x="48.5" y="495.8467">route</text><rect fill="#FEFECE" filter="url(#fz0i0brekuisv)" height="40" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="82" x="127" y="308"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="72" x="132" y="332.8467">prerouting</text><rect fill="#FEFECE" filter="url(#fz0i0brekuisv)" height="40" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="50" x="42" y="308"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="29" x="52.5" y="332.8467">filter</text><rect fill="#FEFECE" filter="url(#fz0i0brekuisv)" height="40" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="90" x="127" y="471"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="80" x="132" y="495.8467">postrouting</text><rect fill="#FEFECE" filter="url(#fz0i0brekuisv)" height="40" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="50" x="147" y="873"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="37" x="153.5" y="897.8467">route</text><rect fill="#FEFECE" filter="url(#fz0i0brekuisv)" height="40" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="50" x="147" y="710"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="29" x="157.5" y="734.8467">filter</text><rect fill="#FEFECE" filter="url(#fz0i0brekuisv)" height="40" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="90" x="22" y="873"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="80" x="27" y="897.8467">postrouting</text><ellipse cx="67" cy="1005" fill="none" filter="url(#fz0i0brekuisv)" rx="10" ry="10" style="stroke: #000000; stroke-width: 1.0;"/><ellipse cx="67.5" cy="1005.5" fill="#000000" rx="6" ry="6" style="stroke: none; stroke-width: 1.0;"/><rect fill="#FEFECE" filter="url(#fz0i0brekuisv)" height="40" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="76" x="134" y="588"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="66" x="139" y="612.8467">upstream</text><!--link *start*app1 to route--><path d="M168,63.0388 C168,86.6401 168,146.2436 168,180.5764 " fill="none" id="*start*app1-route" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="168,185.8603,172,176.8603,168,180.8603,164,176.8603,168,185.8603" style="stroke: #A80036; stroke-width: 1.0;"/><!--link route to prerouting--><path d="M168,226.1458 C168,247.0728 168,279.8721 168,302.5711 " fill="none" id="route-prerouting" style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><polygon fill="#A80036" points="168,307.8243,172,298.8243,168,302.8243,164,298.8243,168,307.8243" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="142" x="169" y="269.0669">ping from .7.27 to .8.8</text><!--link filter to prerouting--><path d="M97.3889,328 C107.216,328 117.0431,328 126.8701,328 " fill="none" id="filter-prerouting" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="92.25,328,101.25,332,97.25,328,101.25,324,92.25,328" style="stroke: #A80036; stroke-width: 1.0;"/><!--link filter to route2--><path d="M67,348.3145 C67,378.0028 67,433.2179 67,465.5663 " fill="none" id="filter-route2" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="67,470.9415,71,461.9415,67,465.9415,63,461.9415,67,470.9415" style="stroke: #A80036; stroke-width: 1.0;"/><!--link route2 to postrouting--><path d="M92.0195,491 C101.8633,491 111.7071,491 121.5509,491 " fill="none" id="route2-postrouting" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="126.6986,491,117.6986,487,121.6986,491,117.6986,495,126.6986,491" style="stroke: #A80036; stroke-width: 1.0;"/><!--link postrouting to upstream--><path d="M172,511.113 C172,530.869 172,561.0824 172,582.5109 " fill="none" id="postrouting-upstream" style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><polygon fill="#A80036" points="172,587.7579,176,578.7579,172,582.7579,168,578.7579,172,587.7579" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="142" x="173" y="554.0669">ping from .7.26 to .8.8</text><!--link upstream to filter2--><path d="M172,628.1458 C172,649.0728 172,681.8721 172,704.5711 " fill="none" id="upstream-filter2" style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><polygon fill="#A80036" points="172,709.8243,176,700.8243,172,704.8243,168,700.8243,172,709.8243" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="146" x="173" y="671.0669">reply from .8.8 to .7.26</text><!--link filter2 to route3--><path d="M172,750.3145 C172,780.0028 172,835.2179 172,867.5663 " fill="none" id="filter2-route3" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="172,872.9415,176,863.9415,172,867.9415,168,863.9415,172,872.9415" style="stroke: #A80036; stroke-width: 1.0;"/><!--link postrouting2 to route3--><path d="M117.2561,893 C127.083,893 136.91,893 146.7369,893 " fill="none" id="postrouting2-route3" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="112.1172,893,121.1172,897,117.1172,893,121.1172,889,112.1172,893" style="stroke: #A80036; stroke-width: 1.0;"/><!--link postrouting2 to *end*app2--><path d="M67,913.0234 C67,934.9933 67,969.7749 67,989.6756 " fill="none" id="postrouting2-*end*app2" style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><polygon fill="#A80036" points="67,994.871,71,985.871,67,989.871,63,985.871,67,994.871" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="146" x="68" y="956.0669">reply from .8.8 to .7.27</text><!--
@startuml
hide empty description


state "AppVM" as app1 {
state "route" as route

[*] - -> route
}

state "ProxyVM" as proxy1 {
state "route" as route2

route -down[dashed]-> prerouting : ping from .7.27 to .8.8
prerouting -left-> filter
filter -down-> route2
route2 -right-> postrouting
}

postrouting -down[dashed]-> upstream : ping from .7.26 to .8.8

state "ProxyVM" as proxy2 {
state "route" as route3
state "filter" as filter2
state "postrouting" as postrouting2

upstream -down[dashed]-> filter2 : reply from .8.8 to .7.26
filter2 -down-> route3
route3 -left-> postrouting2
}

state "AppVM" as app2 {
postrouting2 -down[dashed]-> [*] : reply from .8.8 to .7.27
}

@enduml

PlantUML version 1.2019.07(Mon Jun 24 21:59:20 CEST 2019)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 1.8.0_151-b12
Operating System: Linux
OS Version: 4.4.14-11.pvops.qubes.x86_64
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>